import{S as y}from"./SelectKelompok-ed653d16.js";import{S as B}from"./SelectJenisKegiatan-9dc46ddf.js";import{S as E}from"./SelectKegiatan-d4cb49dc.js";import{h as M}from"./moment-fbc5633a.js";import{_ as w,m as d,o as _,e as S,w as i,f as s,p as e,t as Y,a6 as x,j as K,L as T,g as C,a0 as F}from"./id-3481afe5.js";import{E as U}from"./index-47d68146.js";import{E as L,a as I}from"./index-361ca79f.js";import{E as N,a as O}from"./index-64ddff80.js";import{E as P}from"./index-1e3fb7f1.js";import{v as J}from"./directive-3586f8b3.js";import"./index-39beff3f.js";import"./index-facbdfef.js";import"./index-b6dcfd92.js";import"./typescript-defaf979.js";import"./event-9519ab40.js";import"./scroll-bcd136fa.js";import"./index-a3279758.js";import"./_initCloneObject-eb6e072f.js";import"./_baseIteratee-e7ebdd39.js";import"./panel-time-pick-db034851.js";import"./utils-b76a7458.js";import"./localeData-6c514292.js";const A={components:{SelectKelompok:y,SelectJenisKegiatan:B,SelectKegiatan:E},props:{value:{type:Object},editMode:{type:Boolean,default:!1},errors:{type:Object}},data(){return{title:"Tambah Aktivitas Baru",disableKota:!1,form:{tgl:M().format("YYYY-MM-DD"),kelompok_id:null,jenis_id:null,kegiatan_id:null,keterangan:null},images:[],imagesDeleted:[],loading:!1}},created(){this.editMode&&this.setValue()},methods:{setValue(){this.form.id=this.value.id,this.form.kelompok_id=this.value.kelompok_id,this.form.jenis_id=this.value.jenis_id,this.form.kegiatan_id=this.value.kegiatan_id,this.form.keterangan=this.value.keterangan,this.value.foto.length&&this.value.foto.forEach(a=>{this.images.push({name:a.nama,url:a.path})})},submit(){this.loading=!0;let a=Object.assign(this.form,{images:this.images,imagesDeleted:this.imagesDeleted}),o=this.$inertia.form(a),n=this.editMode===!0?this.route("admin.aktivitas.update",{id:this.value.id}):this.route("admin.aktivitas.store");o.post(n,{preserveScroll:!0,onFinish:()=>{this.loading=!1},onSuccess:()=>this.$swal.fire({icon:"success",title:"Berhasil",text:"Pendukung Baru Berhasil Ditambahkan!",showCancelButton:!0,confirmButtonText:"Tambah Lainnya",cancelButtonText:"Kembali"}).then(u=>{u.isConfirmed&&this.$inertia.visit(this.route("user.pendukung.create"))})})},removeImage(a,o){this.imagesDeleted.push(a)}}},R={class:"content"},q={class:"content-heading d-flex justify-content-between align-items-center"},z={class:"block rounded"},G={class:"block-content p-4"},H=s("i",{class:"fa fa-plus"},null,-1),Q=s("div",{class:"el-upload__tip"}," file jpg/png kurang dari 1MB ",-1),W=s("i",{class:"fa fa-check me-2"},null,-1);function X(a,o,n,u,t,p){const f=U,r=L,m=N,c=d("select-kelompok"),g=d("select-jenis-kegiatan"),h=d("select-kegiatan"),k=O,v=P,b=F,j=I,V=d("base-layout"),D=J;return _(),S(V,null,{default:i(()=>[s("div",R,[e(j,{"label-position":"top","label-width":"100%",onSubmit:C(p.submit,["prevent"])},{default:i(()=>[s("div",q,[s("span",null,Y(t.title),1)]),s("div",z,[x((_(),K("div",G,[e(k,{gutter:40},{default:i(()=>[e(m,{md:12},{default:i(()=>[e(r,{label:"Tanggal",error:n.errors.tgl},{default:i(()=>[e(f,{modelValue:t.form.tgl,"onUpdate:modelValue":o[0]||(o[0]=l=>t.form.tgl=l),type:"date",placeholder:"Tanggal",format:"DD MMMM YYYY","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["error"])]),_:1}),e(m,{md:12},{default:i(()=>[e(r,{label:"Kelompok",error:n.errors.kelompok_id},{default:i(()=>[e(c,{modelValue:t.form.kelompok_id,"onUpdate:modelValue":o[1]||(o[1]=l=>t.form.kelompok_id=l)},null,8,["modelValue"])]),_:1},8,["error"])]),_:1}),e(m,{md:12},{default:i(()=>[e(r,{label:"Jenis Kegiatan",error:n.errors.jenis_id,onChange:o[3]||(o[3]=l=>t.form.kegiatan_id=null)},{default:i(()=>[e(g,{modelValue:t.form.jenis_id,"onUpdate:modelValue":o[2]||(o[2]=l=>t.form.jenis_id=l)},null,8,["modelValue"])]),_:1},8,["error"])]),_:1}),e(m,{md:12},{default:i(()=>[e(r,{label:"Kegiatan",error:n.errors.kegiatan_id},{default:i(()=>[e(h,{modelValue:t.form.kegiatan_id,"onUpdate:modelValue":o[4]||(o[4]=l=>t.form.kegiatan_id=l),disabled:!t.form.jenis_id,hasParent:"",jenis:t.form.jenis_id},null,8,["modelValue","disabled","jenis"])]),_:1},8,["error"])]),_:1})]),_:1}),e(r,{class:"mb-4",label:"Foto Dokumentasi","label-width":"180px"},{default:i(()=>[e(v,{action:"#","file-list":t.images,"onUpdate:fileList":o[5]||(o[5]=l=>t.images=l),"on-remove":p.removeImage,"list-type":"picture-card","auto-upload":!1},{tip:i(()=>[Q]),default:i(()=>[H]),_:1},8,["file-list","on-remove"])]),_:1}),e(b,{"native-type":"submit",type:"primary",loading:t.loading},{default:i(()=>[W,T(" Simpan ")]),_:1},8,["loading"])])),[[D,t.loading]])])]),_:1},8,["onSubmit"])])]),_:1})}const be=w(A,[["render",X]]);export{be as default};
