import{_ as J,K as L,m as U,o as f,e as h,w as t,f as s,p as e,L as m,a6 as C,g as E,t as g,a0 as z,q as I,u as N,v as A}from"./id-3481afe5.js";import"./moment-fbc5633a.js";import{S as P}from"./SelectJenisKegiatan-9dc46ddf.js";import{E as v}from"./index-6f4b141f.js";import{E as O}from"./index-b64fb6eb.js";import{E as q,a as H}from"./index-39beff3f.js";import{E as R,a as Y}from"./index-64ddff80.js";import{E as G}from"./index-b6dcfd92.js";import{E as Q,a as W}from"./index-7888d8ea.js";import{E as X}from"./index-34caf5a7.js";import{E as Z,a as $}from"./index-361ca79f.js";import{E as ee}from"./index-7afa1b35.js";import{v as te}from"./directive-3586f8b3.js";import"./typescript-defaf979.js";import"./index-0767bb4b.js";import"./scroll-bcd136fa.js";import"./vnode-c8d30334.js";import"./index-facbdfef.js";import"./event-9519ab40.js";import"./index-a3279758.js";import"./_initCloneObject-eb6e072f.js";import"./_baseIteratee-e7ebdd39.js";import"./isArrayLikeObject-ad341f20.js";import"./raf-3d0315fc.js";const oe={components:{SelectJenisKegiatan:P},props:{errors:{type:Object}},data(){return{selected:[],data:[],isLoading:!0,page:1,pageSize:0,searchKey:"nama",searchKeyword:"",limit:25,total:0,showForm:!1,from:0,to:0,sort:"nama",sortDir:"ASC",formTitle:"Tambah JenisKegiatan",form:{id:null,nama:null},editMode:!1,loadingForm:!1}},async created(){await this.fetchData()},methods:{sortChange(l){this.sort=l.prop,this.sortDir=l.order=="ascending"?"ASC":"DESC",this.fetchData()},doSearch:_.debounce(function(){this.isLoading=!0,this.fetchData()},1e3),async fetchData(a){var a=a??1;try{this.isLoading=!0;const i=await L.get(this.route("admin.jenis_kegiatan.data"),{params:{page:a,limit:this.limit,sort:this.sort,sortDir:this.sortDir,search:this.searchKeyword,searchKey:this.searchKey}});i.status==200&&(this.data=i.data.data,this.page=i.data.current_page,this.total=i.data.total,this.pageSize=i.data.per_page,this.from=i.data.from,this.to=i.data.to),this.isLoading=!1}catch(i){console.error(i)}},onCloseForm(){this.title="Tambah Jenis Kegiatan",this.editMode=!1,this.form.id=null,this.form.nama=null,this.showForm=!1},submit(){this.loadingForm=!0;let l=this.$inertia.form(this.form),a=this.editMode==!0?this.route("admin.jenis_kegiatan.update",{id:this.form.id}):this.route("admin.jenis_kegiatan.store");l.post(a,{preserveScroll:!0,onFinish:()=>{this.loadingForm=!1,this.fetchData()},onSuccess:()=>{v({type:"success",message:"Data Berhasil Disimpan!"}),this.onCloseForm()}})},edit(l){this.formTitle="Ubah Jenis Kegiatan",this.form.id=l.id,this.form.nama=l.nama,this.editMode=!0,this.showForm=!0},hapus(l){O.alert("Data yang dihapus tidak bisa dikembalikan!","Peringatan",{showCancelButton:!0,confirmButtonText:"Ya!",cancelButtonText:"Tidak!",type:"warning"}).then(()=>{this.$inertia.delete(this.route("admin.jenis_kegiatandelete",{id:l}),{preserveScroll:!0,onSuccess:()=>{this.fetchData(),v({type:"success",message:"Data Berhasil Dihapus!"})}})})}}},ae={class:"content"},se={class:"content-heading d-flex justify-content-between align-items-center"},ne=s("span",null,"Jenis Kegiatan",-1),ie={class:"space-x-1"},le={class:"block block-rounded"},re={class:"block-content py-3"},me=s("span",null,[s("i",{class:"fa fa-search"})],-1),ce={class:"block-content p-0"},de=s("i",{class:"fa fa-angle-down ms-1"},null,-1),pe=s("i",{class:"si fa-fw si-note"},null,-1),ue=s("i",{class:"si fa-fw si-trash"},null,-1),_e={class:"block-content py-2"},fe={class:"my-auto fs-sm"},he={class:"dialog-footer"},ge=s("i",{class:"fa fa-close me-2"},null,-1),be=s("i",{class:"fa fa-check me-2"},null,-1);function we(l,a,i,ye,o,r){const c=z,u=q,D=H,d=R,b=G,w=Y,p=Q,y=I,x=N,S=A,F=W,K=X,V=Z,T=$,B=ee,j=U("base-layout"),k=te;return f(),h(j,null,{default:t(()=>[s("div",ae,[s("div",se,[ne,s("div",ie,[e(c,{onClick:a[0]||(a[0]=n=>o.showForm=!0),type:"primary"},{default:t(()=>[m(" Tambah ")]),_:1})])]),s("div",le,[s("div",re,[e(w,{justify:"space-between"},{default:t(()=>[e(d,{span:12},{default:t(()=>[e(D,{modelValue:o.limit,"onUpdate:modelValue":a[1]||(a[1]=n=>o.limit=n),placeholder:"Pilih",style:{width:"115px"},onChange:a[2]||(a[2]=n=>r.fetchData(1))},{default:t(()=>[e(u,{label:"25",value:"25"}),e(u,{label:"50",value:"50"}),e(u,{label:"100",value:"100"})]),_:1},8,["modelValue"])]),_:1}),e(d,{span:8},{default:t(()=>[e(b,{modelValue:o.searchKeyword,"onUpdate:modelValue":a[3]||(a[3]=n=>o.searchKeyword=n),onInput:r.doSearch,clearable:""},{prefix:t(()=>[me]),_:1},8,["modelValue","onInput"])]),_:1})]),_:1})]),s("div",ce,[C((f(),h(F,{data:o.data,class:"w-100","header-cell-class-name":"bg-body text-dark",onSortChange:r.sortChange},{default:t(()=>[e(p,{type:"index",width:"50"}),e(p,{prop:"nama",label:"Nama",sortable:""}),e(p,{prop:"kegiatan_count",label:"Jumlah Kegiatan",sortable:""}),e(p,{label:"Aksi",align:"center",width:"180"},{default:t(n=>[e(S,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:t(()=>[e(x,null,{default:t(()=>[e(y,{class:"d-flex align-items-center justify-content-between space-x-1",onClick:E(M=>r.edit(n.row),["prevent"])},{default:t(()=>[m(" Ubah "),pe]),_:2},1032,["onClick"]),e(y,{class:"d-flex align-items-center justify-content-between space-x-1",onClick:E(M=>r.hapus(n.row.id),["prevent"])},{default:t(()=>[m(" Hapus "),ue]),_:2},1032,["onClick"])]),_:2},1024)]),default:t(()=>[e(c,{type:"primary"},{default:t(()=>[m(" Aksi "),de]),_:1})]),_:2},1024)]),_:1})]),_:1},8,["data","onSortChange"])),[[k,o.isLoading]])]),s("div",_e,[e(w,{justify:"space-between"},{default:t(()=>[e(d,{lg:12,class:"d-flex"},{default:t(()=>[s("p",fe,"Menampilkan "+g(o.from)+" sampai "+g(o.to)+" dari "+g(o.total),1)]),_:1}),e(d,{lg:12,class:"text-end"},{default:t(()=>[e(K,{class:"float-end",background:"",layout:"prev, pager, next","page-size":o.pageSize,total:o.total,"current-page":o.page,onCurrentChange:r.fetchData},null,8,["page-size","total","current-page","onCurrentChange"])]),_:1})]),_:1})])])]),C((f(),h(B,{modelValue:o.showForm,"onUpdate:modelValue":a[5]||(a[5]=n=>o.showForm=n),title:o.formTitle,width:"40%","before-close":r.onCloseForm},{footer:t(()=>[s("span",he,[e(c,{onClick:r.onCloseForm},{default:t(()=>[ge,m(" Batal ")]),_:1},8,["onClick"]),e(c,{type:"primary",onClick:r.submit},{default:t(()=>[be,m(" Simpan ")]),_:1},8,["onClick"])])]),default:t(()=>[e(T,{model:o.form,"label-position":"top"},{default:t(()=>[e(V,{label:"Nama",error:i.errors.nama},{default:t(()=>[e(b,{modelValue:o.form.nama,"onUpdate:modelValue":a[4]||(a[4]=n=>o.form.nama=n),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["error"])]),_:1},8,["model"])]),_:1},8,["modelValue","title","before-close"])),[[k,o.loadingForm]])]),_:1})}const He=J(oe,[["render",we]]);export{He as default};
