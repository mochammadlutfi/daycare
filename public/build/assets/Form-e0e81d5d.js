import{S as K}from"./SelectKelompok-833f3825.js";import{S as U}from"./SelectJenisKegiatan-ead90dcc.js";import{S as B}from"./SelectKegiatan-904c0911.js";import{_ as C,y as _,m as v,o as V,e as M,w as t,f as s,p as e,t as P,a5 as H,j as Y,K as u,g as R,$ as F}from"./id-2e276a2e.js";import{E as J}from"./index-57703201.js";import{E as N,a as z}from"./index-23bc7dc4.js";import{E as L,a as O}from"./index-5bcbf47d.js";import{E as I}from"./index-cc2271ad.js";import{E as A}from"./index-f2e89185.js";import{E as W,a as q}from"./index-a4208ec2.js";import{E as G,a as Q}from"./index-bb79b737.js";import{v as X}from"./directive-2e5632de.js";import"./typescript-defaf979.js";import"./event-9519ab40.js";import"./_initCloneObject-8785b8d3.js";import"./panel-time-pick-854cfb01.js";import"./utils-2237dd12.js";import"./index-a3b5a262.js";import"./localeData-de255be7.js";import"./isArrayLikeObject-5cf94b9b.js";import"./_baseIteratee-0f2e46c6.js";import"./raf-840075f3.js";import"./index-20f4b275.js";import"./scroll-bd1cd202.js";const Z={components:{SelectKelompok:K,SelectJenisKegiatan:U,SelectKegiatan:B},props:{value:{type:Object},editMode:{type:Boolean,default:!1},errors:{type:Object}},data(){return{title:"Tambah RPPH Baru",disableKota:!1,form:{topik:null,subtopik:null,fase:null,tgl:null,waktu:[new _().hour(8).minute(0),new _().hour(11).minute(0)],kelompok_id:null},kegiatan:[],lines:[],linesDeleted:[],loading:!1}},created(){this.editMode&&this.setValue()},methods:{setValue(){this.form.id=this.value.id,this.form.topik=this.value.topik,this.form.subtopik=this.value.subtopik,this.form.kelompok_id=this.value.kelompok_id,this.form.fase=this.value.fase,this.form.tgl=[new _(this.value.tgl_mulai),new _(this.value.tgl_selesai)],this.form.waktu=[new _(this.value.tgl_mulai+" "+this.value.jam_mulai),new _(this.value.tgl_mulai+" "+this.value.jam_selesai)],this.value.detail.length>0&&this.value.detail.forEach((i,l)=>{this.lines.push({id:i.id,tujuan:i.tujuan,iktp:i.iktp,klasifikasi:i.klasifikasi})}),this.value.kegiatan.length>0&&this.value.kegiatan.forEach((i,l)=>{this.kegiatan.push(i)})},addTarget(){this.lines.push({id:null,klasifikasi:null,tujuan:null,iktp:null})},removeTarget(i,l){l.id&&this.linesDeleted.push(l.id),this.lines.splice(i,1)},addKegiatan(){this.kegiatan.push("")},removeKegiatan(i){this.kegiatan.splice(i,1)},submit(){this.loading=!0;let i=Object.assign(this.form,{lines:this.lines,kegiatan:this.kegiatan,linesDeleted:this.linesDeleted}),l=this.$inertia.form(i),r=this.editMode===!0?this.route("admin.rpph.update",{id:this.value.id}):this.route("admin.rpph.store");l.post(r,{preserveScroll:!0,onFinish:()=>{this.loading=!1},onSuccess:()=>this.$swal.fire({icon:"success",title:"Berhasil",text:"RPPH Ditambahkan!",showCancelButton:!0,confirmButtonText:"Tambah Lainnya",cancelButtonText:"Kembali"}).then(g=>{g.isConfirmed&&this.$inertia.visit(this.route("user.pendukung.create"))})})}}},$={class:"content"},ee={class:"content-heading d-flex justify-content-between align-items-center"},te={class:"block rounded"},ae={class:"block-content p-4"},le=s("i",{class:"fa fa-plus me-1"},null,-1),oe=s("i",{class:"fa fa-close me-1"},null,-1),ie=s("h3",{class:"h5 mb-2"},"Rencana Kegiatan",-1),se=s("i",{class:"fa fa-plus me-1"},null,-1),ne=s("i",{class:"fa fa-close me-1"},null,-1),re=s("i",{class:"fa fa-check me-2"},null,-1);function me(i,l,r,g,o,k){const d=J,p=N,f=L,w=v("select-kelompok"),y=I,T=A,E=O,m=W,h=G,D=Q,c=F,b=q,S=z,x=v("base-layout"),j=X;return V(),M(x,null,{default:t(()=>[s("div",$,[e(S,{"label-position":"top","label-width":"100%",onSubmit:R(k.submit,["prevent"])},{default:t(()=>[s("div",ee,[s("span",null,P(o.title),1)]),s("div",te,[H((V(),Y("div",ae,[e(E,{gutter:40},{default:t(()=>[e(f,{md:12},{default:t(()=>[e(p,{label:"Topik",error:r.errors.topik},{default:t(()=>[e(d,{modelValue:o.form.topik,"onUpdate:modelValue":l[0]||(l[0]=a=>o.form.topik=a)},null,8,["modelValue"])]),_:1},8,["error"])]),_:1}),e(f,{md:12},{default:t(()=>[e(p,{label:"Subtopik",error:r.errors.subtopik},{default:t(()=>[e(d,{modelValue:o.form.subtopik,"onUpdate:modelValue":l[1]||(l[1]=a=>o.form.subtopik=a)},null,8,["modelValue"])]),_:1},8,["error"])]),_:1}),e(f,{md:12},{default:t(()=>[e(p,{label:"Fase",error:r.errors.fase},{default:t(()=>[e(d,{modelValue:o.form.fase,"onUpdate:modelValue":l[2]||(l[2]=a=>o.form.fase=a)},null,8,["modelValue"])]),_:1},8,["error"])]),_:1}),e(f,{md:12},{default:t(()=>[e(p,{label:"Kelompok",error:r.errors.kelompok_id},{default:t(()=>[e(w,{modelValue:o.form.kelompok_id,"onUpdate:modelValue":l[3]||(l[3]=a=>o.form.kelompok_id=a)},null,8,["modelValue"])]),_:1},8,["error"])]),_:1}),e(f,{md:12},{default:t(()=>[e(p,{label:"Tanggal Periode",error:r.errors.tgl},{default:t(()=>[e(y,{modelValue:o.form.tgl,"onUpdate:modelValue":l[4]||(l[4]=a=>o.form.tgl=a),type:"daterange","range-separator":"sampai",placeholder:"Tanggal",format:"DD MMMM YYYY","value-format":"YYYY-MM-DD","start-placeholder":"Tanggal mulai","end-placeholder":"Tanggal selesai",style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["error"])]),_:1}),e(f,{md:12},{default:t(()=>[e(p,{label:"Waktu",error:r.errors.waktu},{default:t(()=>[e(T,{class:"w-100",modelValue:o.form.waktu,"onUpdate:modelValue":l[5]||(l[5]=a=>o.form.waktu=a),"is-range":"","range-separator":"Sampai","start-placeholder":"Jam mulai","end-placeholder":"Jam selesai",format:"HH:mm","value-format":"HH:mm:ss"},null,8,["modelValue"])]),_:1},8,["error"])]),_:1})]),_:1}),e(b,{data:o.lines,border:"",class:"mb-4"},{default:t(()=>[e(m,{type:"index",width:"50"}),e(m,{label:"Klasifikasi"},{default:t(a=>[e(D,{modelValue:a.row.klasifikasi,"onUpdate:modelValue":n=>a.row.klasifikasi=n},{default:t(()=>[e(h,{value:"Nilai Agama dan Budi Pekerti"},{default:t(()=>[u("Nilai Agama dan Budi Pekerti")]),_:1}),e(h,{value:"Jati Diri"},{default:t(()=>[u("Jati Diri")]),_:1}),e(h,{value:"Dasar-Dasar Literasi, Matematika, Sains,  Teknologi, Rekayasa dan Seni"},{default:t(()=>[u("Dasar-Dasar Literasi, Matematika, Sains, Teknologi, Rekayasa dan Seni")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),e(m,{label:"Tujuan Pembelajaran"},{default:t(a=>[e(d,{type:"textarea",rows:4,modelValue:a.row.tujuan,"onUpdate:modelValue":n=>a.row.tujuan=n},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(m,{label:"Perilaku yang teramati/IKTP"},{default:t(a=>[e(d,{type:"textarea",rows:4,modelValue:a.row.iktp,"onUpdate:modelValue":n=>a.row.iktp=n},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(m,{align:"right",width:"100"},{header:t(()=>[e(c,{size:"small",type:"primary",onClick:l[6]||(l[6]=a=>k.addTarget())},{default:t(()=>[le,u(" Tambah ")]),_:1})]),default:t(a=>[e(c,{size:"small",type:"danger",onClick:n=>k.removeTarget(a.$index,a.row)},{default:t(()=>[oe,u(" Hapus ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),ie,e(b,{data:o.kegiatan,border:"",class:"mb-4"},{default:t(()=>[e(m,{type:"index",width:"50"}),e(m,{label:"Kegiatan"},{default:t(a=>[e(d,{modelValue:o.kegiatan[a.$index],"onUpdate:modelValue":n=>o.kegiatan[a.$index]=n},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(m,{align:"right",width:"100"},{header:t(()=>[e(c,{size:"small",type:"primary",onClick:l[7]||(l[7]=a=>k.addKegiatan())},{default:t(()=>[se,u(" Tambah ")]),_:1})]),default:t(a=>[e(c,{size:"small",type:"danger",onClick:n=>k.removeKegiatan(a.$index)},{default:t(()=>[ne,u(" Hapus ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(c,{"native-type":"submit",type:"primary",loading:o.loading},{default:t(()=>[re,u(" Simpan ")]),_:1},8,["loading"])])),[[j,o.loading]])])]),_:1},8,["onSubmit"])])]),_:1})}const Me=C(Z,[["render",me]]);export{Me as default};
