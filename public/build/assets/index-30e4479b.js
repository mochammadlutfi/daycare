import{M as K,N as Q,R as V,ak as Z,ac as ee,S as U,r as C,ao as M,ad as te,av as Y,as as _e,o as le,j as re,n as ie,V as z,a9 as ge,X as ce,ap as ae,ec as Ne,ed as Te,c as L,au as ue,by as Pe,p as c,aV as D,bN as Ce,bF as Se,bR as we,aJ as I,aW as Ee,k as G,ee as $e,aB as se,aK as xe,aF as Be,b6 as ke,ef as ne,a as Oe,bz as Re,a6 as ze,at as Ae,W as Fe,a5 as Me,b1 as Ve}from"./id-3481afe5.js";import{m as de}from"./typescript-defaf979.js";import{c as A}from"./index-39beff3f.js";import{U as be}from"./event-9519ab40.js";import{u as Le}from"./index-7efcceaf.js";const W=Symbol("tabsRootContextKey"),De=K({tabs:{type:Q(Array),default:()=>de([])}}),ve="ElTabBar",Ie=V({name:ve}),Ke=V({...Ie,props:De,setup(e,{expose:l}){const _=e,g=ae(),t=Z(W);t||ee(ve,"<el-tabs><el-tab-bar /></el-tabs>");const b=U("tabs"),E=C(),v=C(),f=()=>{let n=0,p=0;const d=["top","bottom"].includes(t.props.tabPosition)?"width":"height",R=d==="width"?"x":"y",s=R==="x"?"left":"top";return _.tabs.every($=>{var x,B;const S=(B=(x=g.parent)==null?void 0:x.refs)==null?void 0:B[`tab-${$.uid}`];if(!S)return!1;if(!$.active)return!0;n=S[`offset${A(s)}`],p=S[`client${A(d)}`];const k=window.getComputedStyle(S);return d==="width"&&(p-=Number.parseFloat(k.paddingLeft)+Number.parseFloat(k.paddingRight),n+=Number.parseFloat(k.paddingLeft)),!1}),{[d]:`${p}px`,transform:`translate${A(R)}(${n}px)`}},N=()=>v.value=f(),h=[],r=()=>{var n;h.forEach(d=>d.stop()),h.length=0;const p=(n=g.parent)==null?void 0:n.refs;if(p){for(const d in p)if(d.startsWith("tab-")){const R=p[d];R&&h.push(Y(R,N))}}};M(()=>_.tabs,async()=>{await te(),N(),r()},{immediate:!0});const u=Y(E,()=>N());return _e(()=>{h.forEach(n=>n.stop()),h.length=0,u.stop()}),l({ref:E,update:N}),(n,p)=>(le(),re("div",{ref_key:"barRef",ref:E,class:ie([z(b).e("active-bar"),z(b).is(z(t).props.tabPosition)]),style:ge(v.value)},null,6))}});var Ue=ce(Ke,[["__file","tab-bar.vue"]]);const We=K({panes:{type:Q(Array),default:()=>de([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),je={tabClick:(e,l,_)=>_ instanceof Event,tabRemove:(e,l)=>l instanceof Event},oe="ElTabNav",qe=V({name:oe,props:We,emits:je,setup(e,{expose:l,emit:_}){const g=Z(W);g||ee(oe,"<el-tabs><tab-nav /></el-tabs>");const t=U("tabs"),b=Ne(),E=Te(),v=C(),f=C(),N=C(),h=C(),r=C(!1),u=C(0),n=C(!1),p=C(!0),d=L(()=>["top","bottom"].includes(g.props.tabPosition)?"width":"height"),R=L(()=>({transform:`translate${d.value==="width"?"X":"Y"}(-${u.value}px)`})),s=()=>{if(!v.value)return;const o=v.value[`offset${A(d.value)}`],i=u.value;if(!i)return;const a=i>o?i-o:0;u.value=a},$=()=>{if(!v.value||!f.value)return;const o=f.value[`offset${A(d.value)}`],i=v.value[`offset${A(d.value)}`],a=u.value;if(o-a<=i)return;const T=o-a>i*2?a+i:o-i;u.value=T},x=async()=>{const o=f.value;if(!r.value||!N.value||!v.value||!o)return;await te();const i=N.value.querySelector(".is-active");if(!i)return;const a=v.value,T=["top","bottom"].includes(g.props.tabPosition),P=i.getBoundingClientRect(),y=a.getBoundingClientRect(),O=T?o.offsetWidth-y.width:o.offsetHeight-y.height,w=u.value;let m=w;T?(P.left<y.left&&(m=w-(y.left-P.left)),P.right>y.right&&(m=w+P.right-y.right)):(P.top<y.top&&(m=w-(y.top-P.top)),P.bottom>y.bottom&&(m=w+(P.bottom-y.bottom))),m=Math.max(m,0),u.value=Math.min(m,O)},B=()=>{var o;if(!f.value||!v.value)return;e.stretch&&((o=h.value)==null||o.update());const i=f.value[`offset${A(d.value)}`],a=v.value[`offset${A(d.value)}`],T=u.value;a<i?(r.value=r.value||{},r.value.prev=T,r.value.next=T+a<i,i-T<a&&(u.value=i-a)):(r.value=!1,T>0&&(u.value=0))},S=o=>{const i=o.code,{up:a,down:T,left:P,right:y}=I;if(![a,T,P,y].includes(i))return;const O=Array.from(o.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),w=O.indexOf(o.target);let m;i===P||i===a?w===0?m=O.length-1:m=w-1:w<O.length-1?m=w+1:m=0,O[m].focus({preventScroll:!0}),O[m].click(),k()},k=()=>{p.value&&(n.value=!0)},j=()=>n.value=!1;return M(b,o=>{o==="hidden"?p.value=!1:o==="visible"&&setTimeout(()=>p.value=!0,50)}),M(E,o=>{o?setTimeout(()=>p.value=!0,50):p.value=!1}),Y(N,B),ue(()=>setTimeout(()=>x(),0)),Pe(()=>B()),l({scrollToActiveTab:x,removeFocus:j}),()=>{const o=r.value?[c("span",{class:[t.e("nav-prev"),t.is("disabled",!r.value.prev)],onClick:s},[c(D,null,{default:()=>[c(Ce,null,null)]})]),c("span",{class:[t.e("nav-next"),t.is("disabled",!r.value.next)],onClick:$},[c(D,null,{default:()=>[c(Se,null,null)]})])]:null,i=e.panes.map((a,T)=>{var P,y,O,w;const m=a.uid,q=a.props.disabled,H=(y=(P=a.props.name)!=null?P:a.index)!=null?y:`${T}`,X=!q&&(a.isClosable||e.editable);a.index=`${T}`;const me=X?c(D,{class:"is-icon-close",onClick:F=>_("tabRemove",a,F)},{default:()=>[c(we,null,null)]}):null,he=((w=(O=a.slots).label)==null?void 0:w.call(O))||a.props.label,ye=!q&&a.active?0:-1;return c("div",{ref:`tab-${m}`,class:[t.e("item"),t.is(g.props.tabPosition),t.is("active",a.active),t.is("disabled",q),t.is("closable",X),t.is("focus",n.value)],id:`tab-${H}`,key:`tab-${m}`,"aria-controls":`pane-${H}`,role:"tab","aria-selected":a.active,tabindex:ye,onFocus:()=>k(),onBlur:()=>j(),onClick:F=>{j(),_("tabClick",a,H,F)},onKeydown:F=>{X&&(F.code===I.delete||F.code===I.backspace)&&_("tabRemove",a,F)}},[he,me])});return c("div",{ref:N,class:[t.e("nav-wrap"),t.is("scrollable",!!r.value),t.is(g.props.tabPosition)]},[o,c("div",{class:t.e("nav-scroll"),ref:v},[c("div",{class:[t.e("nav"),t.is(g.props.tabPosition),t.is("stretch",e.stretch&&["top","bottom"].includes(g.props.tabPosition))],ref:f,style:R.value,role:"tablist",onKeydown:S},[e.type?null:c(Ue,{ref:h,tabs:[...e.panes]},null),i])])])}}}),He=K({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:Q(Function),default:()=>!0},stretch:Boolean}),J=e=>xe(e)||Be(e),Xe={[be]:e=>J(e),tabClick:(e,l)=>l instanceof Event,tabChange:e=>J(e),edit:(e,l)=>["remove","add"].includes(l),tabRemove:e=>J(e),tabAdd:()=>!0},Je=V({name:"ElTabs",props:He,emits:Xe,setup(e,{emit:l,slots:_,expose:g}){var t;const b=U("tabs"),E=L(()=>["left","right"].includes(e.tabPosition)),{children:v,addChild:f,removeChild:N}=Le(ae(),"ElTabPane"),h=C(),r=C((t=e.modelValue)!=null?t:"0"),u=async(s,$=!1)=>{var x,B,S;if(!(r.value===s||se(s)))try{await((x=e.beforeLeave)==null?void 0:x.call(e,s,r.value))!==!1&&(r.value=s,$&&(l(be,s),l("tabChange",s)),(S=(B=h.value)==null?void 0:B.removeFocus)==null||S.call(B))}catch{}},n=(s,$,x)=>{s.props.disabled||(u($,!0),l("tabClick",s,x))},p=(s,$)=>{s.props.disabled||se(s.props.name)||($.stopPropagation(),l("edit",s.props.name,"remove"),l("tabRemove",s.props.name))},d=()=>{l("edit",void 0,"add"),l("tabAdd")};M(()=>e.modelValue,s=>u(s)),M(r,async()=>{var s;await te(),(s=h.value)==null||s.scrollToActiveTab()}),Ee(W,{props:e,currentName:r,registerPane:s=>{v.value.push(s)},sortPane:f,unregisterPane:N}),g({currentName:r});const R=({render:s})=>s();return()=>{const s=_["add-icon"],$=e.editable||e.addable?c("div",{class:[b.e("new-tab"),E.value&&b.e("new-tab-vertical")],tabindex:"0",onClick:d,onKeydown:S=>{S.code===I.enter&&d()}},[s?G(_,"add-icon"):c(D,{class:b.is("icon-plus")},{default:()=>[c($e,null,null)]})]):null,x=c("div",{class:[b.e("header"),E.value&&b.e("header-vertical"),b.is(e.tabPosition)]},[c(R,{render:()=>{const S=v.value.some(k=>k.slots.label);return c(qe,{ref:h,currentName:r.value,editable:e.editable,type:e.type,panes:v.value,stretch:e.stretch,onTabClick:n,onTabRemove:p},{$stable:!S})}},null),$]),B=c("div",{class:b.e("content")},[G(_,"default")]);return c("div",{class:[b.b(),b.m(e.tabPosition),{[b.m("card")]:e.type==="card",[b.m("border-card")]:e.type==="border-card"}]},[B,x])}}}),Ye=K({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),fe="ElTabPane",Ge=V({name:fe}),Qe=V({...Ge,props:Ye,setup(e){const l=e,_=ae(),g=ke(),t=Z(W);t||ee(fe,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const b=U("tab-pane"),E=C(),v=L(()=>l.closable||t.props.closable),f=ne(()=>{var n;return t.currentName.value===((n=l.name)!=null?n:E.value)}),N=C(f.value),h=L(()=>{var n;return(n=l.name)!=null?n:E.value}),r=ne(()=>!l.lazy||N.value||f.value);M(f,n=>{n&&(N.value=!0)});const u=Oe({uid:_.uid,slots:g,props:l,paneName:h,active:f,index:E,isClosable:v});return t.registerPane(u),ue(()=>{t.sortPane(u)}),Re(()=>{t.unregisterPane(u.uid)}),(n,p)=>z(r)?ze((le(),re("div",{key:0,id:`pane-${z(h)}`,class:ie(z(b).b()),role:"tabpanel","aria-hidden":!z(f),"aria-labelledby":`tab-${z(h)}`},[G(n.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[Ae,z(f)]]):Fe("v-if",!0)}});var pe=ce(Qe,[["__file","tab-pane.vue"]]);const nt=Me(Je,{TabPane:pe}),ot=Ve(pe);export{ot as E,nt as a};
