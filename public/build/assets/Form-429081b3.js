import{S as C}from"./SelectKelompok-18afe301.js";import{S as D}from"./SelectJenisKegiatan-800d220e.js";import{S as T}from"./SelectKegiatan-024db6f2.js";import{_ as U,y as Y,m as u,o as g,e as N,w as t,f as r,p as e,t as k,a5 as P,j as F,K as h,g as L,$ as O}from"./id-44e39273.js";import{E as A}from"./index-ebf98ed5.js";import{E as H,a as I}from"./index-aa7e31ad.js";import{E as J,a as R}from"./index-84ed3e91.js";import{E as q,a as z}from"./index-b7b101e9.js";import{E as G,a as Q}from"./index-88bb1aa7.js";import{E as W}from"./index-4ea0d70f.js";import{v as X}from"./directive-cd218522.js";import"./panel-time-pick-f24324ab.js";import"./utils-d95efb42.js";import"./index-9f983416.js";import"./_initCloneObject-24df7827.js";import"./localeData-212d917f.js";import"./typescript-defaf979.js";import"./_baseIteratee-982954bc.js";import"./event-9519ab40.js";import"./isArrayLikeObject-b43587b5.js";import"./raf-3ca20a2c.js";import"./index-10bd6a9f.js";import"./scroll-bd36456a.js";const Z={components:{SelectKelompok:C,SelectJenisKegiatan:D,SelectKegiatan:T},props:{value:{type:Object},editMode:{type:Boolean,default:!1},errors:{type:Object}},data(){return{title:"Tambah Penilaian Baru",disableKota:!1,form:{tgl:new Y,kelompok_id:null,jenis_id:null,kegiatan_id:null},lines:[],loading:!1}},created(){this.editMode&&this.setValue()},methods:{setValue(){},async fetchAnak(){try{this.isLoading=!0,this.lines=[];const n=await axios.get(this.route("admin.anak.data"),{params:{kelompok_id:this.form.kelompok_id}});n.status==200&&n.data.forEach((o,i)=>{this.lines.push({id:null,anak_id:o.id,user_id:o.user_id,anak_nama:o.nama,nilai:null,keterangan:null})}),this.isLoading=!1}catch(n){console.error(n)}},submit(){this.loading=!0;let n=Object.assign(this.form,{lines:this.lines}),o=this.$inertia.form(n),i=this.editMode===!0?this.route("admin.nilai.update",{id:this.value.id}):this.route("admin.nilai.store");o.post(i,{preserveScroll:!0,onFinish:()=>{this.loading=!1},onSuccess:()=>this.$swal.fire({icon:"success",title:"Berhasil",text:"Pendukung Baru Berhasil Ditambahkan!",showCancelButton:!0,confirmButtonText:"Tambah Lainnya",cancelButtonText:"Kembali"}).then(p=>{p.isConfirmed&&this.$inertia.visit(this.route("user.pendukung.create"))})})}}},$={class:"content"},ee={class:"content-heading d-flex justify-content-between align-items-center"},te={class:"block rounded"},oe={class:"block-content p-4"},ae=r("i",{class:"fa fa-check me-2"},null,-1);function le(n,o,i,p,l,f){const b=A,s=H,m=J,B=u("select-kelompok"),V=u("select-jenis-kegiatan"),v=u("select-kegiatan"),w=R,_=q,d=G,E=Q,y=W,S=z,j=O,M=I,x=u("base-layout"),K=X;return g(),N(x,null,{default:t(()=>[r("div",$,[e(M,{"label-position":"top","label-width":"100%",onSubmit:L(f.submit,["prevent"])},{default:t(()=>[r("div",ee,[r("span",null,k(l.title),1)]),r("div",te,[P((g(),F("div",oe,[e(w,{gutter:40},{default:t(()=>[e(m,{md:12},{default:t(()=>[e(s,{label:"Tanggal",error:i.errors.tgl},{default:t(()=>[e(b,{modelValue:l.form.tgl,"onUpdate:modelValue":o[0]||(o[0]=a=>l.form.tgl=a),type:"date",placeholder:"Tanggal",format:"DD MMMM YYYY","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["error"])]),_:1}),e(m,{md:12},{default:t(()=>[e(s,{label:"Kelompok",error:i.errors.kelompok_id},{default:t(()=>[e(B,{modelValue:l.form.kelompok_id,"onUpdate:modelValue":o[1]||(o[1]=a=>l.form.kelompok_id=a),onChange:f.fetchAnak},null,8,["modelValue","onChange"])]),_:1},8,["error"])]),_:1}),e(m,{md:12},{default:t(()=>[e(s,{label:"Jenis Kegiatan",error:i.errors.jenis_id,onChange:o[3]||(o[3]=a=>l.form.kegiatan_id=null)},{default:t(()=>[e(V,{modelValue:l.form.jenis_id,"onUpdate:modelValue":o[2]||(o[2]=a=>l.form.jenis_id=a)},null,8,["modelValue"])]),_:1},8,["error"])]),_:1}),e(m,{md:12},{default:t(()=>[e(s,{label:"Kegiatan",error:i.errors.kegiatan_id},{default:t(()=>[e(v,{modelValue:l.form.kegiatan_id,"onUpdate:modelValue":o[4]||(o[4]=a=>l.form.kegiatan_id=a),disabled:!l.form.jenis_id,hasParent:"",jenis:l.form.jenis_id},null,8,["modelValue","disabled","jenis"])]),_:1},8,["error"])]),_:1})]),_:1}),e(S,{data:l.lines,border:"",class:"mb-4",id:"variant"},{default:t(()=>[e(_,{label:"Nama Anak"},{default:t(a=>[h(k(a.row.anak_nama),1)]),_:1}),e(_,{label:"Nilai",width:"250px"},{default:t(a=>[e(E,{modelValue:a.row.nilai,"onUpdate:modelValue":c=>a.row.nilai=c,placeholder:"Pilih",class:"w-100"},{default:t(()=>[e(d,{label:"Belum Berkembang",value:"BB"}),e(d,{label:"Mulai Berkembang",value:"MB"}),e(d,{label:"Berkembang Sesuai Harapan",value:"BSH"}),e(d,{label:"Berkembang Sangat Baik",value:"BSB"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),e(_,{label:"Keterangan"},{default:t(a=>[e(y,{modelValue:a.row.keterangan,"onUpdate:modelValue":c=>a.row.keterangan=c},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"]),e(j,{"native-type":"submit",type:"primary",loading:l.loading},{default:t(()=>[ae,h(" Simpan ")]),_:1},8,["loading"])])),[[K,l.loading]])])]),_:1},8,["onSubmit"])])]),_:1})}const Me=U(Z,[["render",le]]);export{Me as default};
