import{_ as T,J as B,m as j,o as f,e as g,w as t,f as a,p as e,K as c,a5 as G,t as L,g as w,$ as U,q as z,u as N,v as Y}from"./id-2e276a2e.js";import{h as A}from"./moment-fbc5633a.js";import{E as b}from"./index-d645a2bc.js";import{E as I}from"./index-522dba8d.js";import{E as P,a as J}from"./index-bb79b737.js";import{E as q,a as H}from"./index-5bcbf47d.js";import{E as O}from"./index-57703201.js";import{E as R,a as Q}from"./index-a4208ec2.js";import{E as W}from"./index-3a9112db.js";import{E as X,a as Z}from"./index-23bc7dc4.js";import{E as $}from"./index-593b96c3.js";import{v as ee}from"./directive-2e5632de.js";import"./typescript-defaf979.js";import"./index-80ddcb64.js";import"./scroll-bd1cd202.js";import"./vnode-f4803515.js";import"./index-20f4b275.js";import"./event-9519ab40.js";import"./index-a3b5a262.js";import"./_initCloneObject-8785b8d3.js";import"./_baseIteratee-0f2e46c6.js";import"./isArrayLikeObject-5cf94b9b.js";import"./raf-840075f3.js";const te={components:{},data(){return{selected:[],data:[],isLoading:!0,page:1,pageSize:0,searchKey:"name",searchKeyword:"",limit:25,total:0,showForm:!1,sort:"name",sortDir:"ASC",formTitle:"Tambah Group Kontak",form:{id:null,name:null},editMode:!1,loadingForm:!1}},async created(){await this.fetchData()},methods:{sortChange(l){this.sort=l.prop,this.sortDir=l.order=="ascending"?"ASC":"DESC",this.fetchData()},async fetchData(o){var o=o??1;try{this.isLoading=!0;const r=await B.get(this.route("admin.contact.group.data"),{params:{page:o,limit:this.limit,sort:this.sort,sortDir:this.sortDir,search:this.searchKeyword,searchKey:this.searchKey}});r.status==200&&(this.data=r.data.data,this.page=r.data.current_page,this.total=r.data.total,this.pageSize=r.data.per_page),this.isLoading=!1}catch(r){console.error(r)}},format_date(l){if(l)return A(String(l)).format("DD MMMM YYYY")},onCloseForm(){this.title="Tambah Group kontak",this.editMode=!1,this.form.id=null,this.form.name=null,this.showForm=!1},submit(){this.loadingForm=!0;let l=this.$inertia.form(this.form),o=this.editMode==!0?this.route("admin.contact.group.update",{id:this.form.id}):this.route("admin.contact.group.store");l.post(o,{preserveScroll:!0,onFinish:()=>{this.loadingForm=!1,this.fetchData()},onSuccess:()=>{b({type:"success",message:"Data Berhasil Disimpan!"}),this.onCloseForm()}})},edit(l){this.formTitle="Ubah Group Kontak",this.form.id=l.id,this.form.name=l.name,this.form.brand_id=l.brand_id,this.editMode=!0,this.showForm=!0},hapus(l){I.alert("Data yang dihapus tidak bisa dikembalikan!","Peringatan",{showCancelButton:!0,confirmButtonText:"Ya!",cancelButtonText:"Tidak!",type:"warning"}).then(()=>{this.$inertia.delete(this.route("admin.contact.group.delete",{id:l}),{preserveScroll:!0,onSuccess:()=>{this.fetchData(),b({type:"success",message:"Data Berhasil Dihapus!"})}})})}}},oe={class:"content"},ae={class:"content-heading d-flex justify-content-between align-items-center"},se=a("span",null,"List Group Kontak",-1),ne={class:"space-x-1"},le={class:"block block-rounded"},ie={class:"block-content py-3"},re=a("i",{class:"fa fa-search"},null,-1),ce={class:"block-content p-0"},de=a("i",{class:"fa fa-angle-down ms-1"},null,-1),me=["href"],pe=a("i",{class:"si fa-fw si-eye"},null,-1),ue=a("i",{class:"si fa-fw si-note"},null,-1),_e=a("i",{class:"si fa-fw si-trash"},null,-1),he={class:"block-content py-2"},fe={class:"row justify-content-end"},ge={class:"col-md-6 text-end"},we={class:"dialog-footer"};function be(l,o,r,ke,s,i){const d=U,p=P,k=J,_=q,h=O,y=H,m=R,u=z,C=N,v=Y,D=Q,E=W,x=X,F=Z,S=$,V=j("base-layout"),K=ee;return f(),g(V,null,{default:t(()=>[a("div",oe,[a("div",ae,[se,a("div",ne,[e(d,{onClick:o[0]||(o[0]=n=>s.showForm=!0),type:"primary"},{default:t(()=>[c(" Tambah Group Kontak ")]),_:1})])]),a("div",le,[a("div",ie,[e(y,{justify:"space-between"},{default:t(()=>[e(_,{span:12},{default:t(()=>[e(k,{modelValue:s.limit,"onUpdate:modelValue":o[1]||(o[1]=n=>s.limit=n),placeholder:"Pilih",style:{width:"115px"},onChange:o[2]||(o[2]=n=>i.fetchData(1))},{default:t(()=>[e(p,{label:"25",value:"25"}),e(p,{label:"50",value:"50"}),e(p,{label:"100",value:"100"})]),_:1},8,["modelValue"])]),_:1}),e(_,{span:8},{default:t(()=>[e(h,{modelValue:s.searchKeyword,"onUpdate:modelValue":o[4]||(o[4]=n=>s.searchKeyword=n),placeholder:"Masukan kata kunci",class:"input-with-select",clearable:""},{append:t(()=>[e(d,{onClick:o[3]||(o[3]=n=>i.fetchData(1))},{default:t(()=>[re]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),a("div",ce,[G((f(),g(D,{data:s.data,class:"table-click",style:{width:"100%"},onSortChange:i.sortChange},{default:t(()=>[e(m,{type:"index",width:"50"}),e(m,{prop:"name",label:"Nama",sortable:""}),e(m,{prop:"contacts_count",label:"Jumlah Kontak",sortable:""}),e(m,{label:"Dibuat"},{default:t(n=>[c(L(i.format_date(n.row.created_at)),1)]),_:1}),e(m,{label:"Aksi",align:"center",width:"180"},{default:t(n=>[e(v,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:t(()=>[e(C,null,{default:t(()=>[e(u,null,{default:t(()=>[a("a",{href:l.route("admin.contact.show",{id:n.row.id}),class:"d-flex align-items-center justify-content-between w-100"},[c(" Detail "),pe],8,me)]),_:2},1024),e(u,{class:"d-flex align-items-center justify-content-between space-x-1",onClick:w(M=>i.edit(n.row),["prevent"])},{default:t(()=>[c(" Ubah "),ue]),_:2},1032,["onClick"]),e(u,{class:"d-flex align-items-center justify-content-between space-x-1",onClick:w(M=>i.hapus(n.row.id),["prevent"])},{default:t(()=>[c(" Hapus "),_e]),_:2},1032,["onClick"])]),_:2},1024)]),default:t(()=>[e(d,{type:"primary"},{default:t(()=>[c(" Aksi "),de]),_:1})]),_:2},1024)]),_:1})]),_:1},8,["data","onSortChange"])),[[K,s.isLoading]])]),a("div",he,[a("div",fe,[a("div",ge,[e(E,{class:"float-end",background:"",layout:"prev, pager, next","page-size":s.pageSize,total:s.total,"current-page":s.page,onCurrentChange:i.fetchData},null,8,["page-size","total","current-page","onCurrentChange"])])])])])]),e(S,{modelValue:s.showForm,"onUpdate:modelValue":o[6]||(o[6]=n=>s.showForm=n),title:s.formTitle,width:"30%","before-close":i.onCloseForm},{footer:t(()=>[a("span",we,[e(d,{onClick:i.onCloseForm},{default:t(()=>[c("Batal")]),_:1},8,["onClick"]),e(d,{type:"primary",onClick:i.submit},{default:t(()=>[c(" Simpan ")]),_:1},8,["onClick"])])]),default:t(()=>[e(F,{model:s.form,"label-position":"top"},{default:t(()=>[e(x,{label:"Nama Group"},{default:t(()=>[e(h,{modelValue:s.form.name,"onUpdate:modelValue":o[5]||(o[5]=n=>s.form.name=n),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title","before-close"])]),_:1})}const Je=T(te,[["render",be]]);export{Je as default};
