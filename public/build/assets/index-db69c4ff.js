import{bz as ge,b3 as _e,M as U,N as J,R as F,aX as Z,ad as ee,S as K,r as w,ab as M,ae as te,cc as Y,ba as Ne,o as le,j as re,n as ie,V as z,a9 as Ce,X as ce,aP as ae,eb as Te,ec as Pe,c as L,be as ue,bk as we,p as d,cB as D,dc as Se,d5 as Ee,dg as $e,cp as I,bl as xe,k as G,ed as Be,ci as se,cq as Oe,cm as ke,bQ as Re,ee as ne,a as ze,bj as Ae,a6 as Ve,bV as Me,W as Fe,a5 as Le,cD as De}from"./id-97c9e5f5.js";import{m as de}from"./typescript-defaf979.js";import{c as A}from"./index-bcb34dd7.js";import{U as be}from"./event-9519ab40.js";import{f as Ie}from"./vnode-4e97093f.js";const Ue=(e,o,b)=>Ie(e.subTree).filter(s=>{var u;return _e(s)&&((u=s.type)==null?void 0:u.name)===o&&!!s.component}).map(s=>s.component.uid).map(s=>b[s]).filter(s=>!!s),Ke=(e,o)=>{const b={},v=ge([]);return{children:v,addChild:u=>{b[u.uid]=u,v.value=Ue(e,o,b)},removeChild:u=>{delete b[u],v.value=v.value.filter(f=>f.uid!==u)}}},W=Symbol("tabsRootContextKey"),We=U({tabs:{type:J(Array),default:()=>de([])}}),ve="ElTabBar",je=F({name:ve}),qe=F({...je,props:We,setup(e,{expose:o}){const b=e,v=ae(),t=Z(W);t||ee(ve,"<el-tabs><el-tab-bar /></el-tabs>");const s=K("tabs"),u=w(),f=w(),h=()=>{let l=0,y=0;const m=["top","bottom"].includes(t.props.tabPosition)?"width":"height",R=m==="width"?"x":"y",n=R==="x"?"left":"top";return b.tabs.every($=>{var x,B;const S=(B=(x=v.parent)==null?void 0:x.refs)==null?void 0:B[`tab-${$.uid}`];if(!S)return!1;if(!$.active)return!0;l=S[`offset${A(n)}`],y=S[`client${A(m)}`];const O=window.getComputedStyle(S);return m==="width"&&(y-=Number.parseFloat(O.paddingLeft)+Number.parseFloat(O.paddingRight),l+=Number.parseFloat(O.paddingLeft)),!1}),{[m]:`${y}px`,transform:`translate${A(R)}(${l}px)`}},C=()=>f.value=h(),_=[],i=()=>{var l;_.forEach(m=>m.stop()),_.length=0;const y=(l=v.parent)==null?void 0:l.refs;if(y){for(const m in y)if(m.startsWith("tab-")){const R=y[m];R&&_.push(Y(R,C))}}};M(()=>b.tabs,async()=>{await te(),C(),i()},{immediate:!0});const p=Y(u,()=>C());return Ne(()=>{_.forEach(l=>l.stop()),_.length=0,p.stop()}),o({ref:u,update:C}),(l,y)=>(le(),re("div",{ref_key:"barRef",ref:u,class:ie([z(s).e("active-bar"),z(s).is(z(t).props.tabPosition)]),style:Ce(f.value)},null,6))}});var Xe=ce(qe,[["__file","tab-bar.vue"]]);const He=U({panes:{type:J(Array),default:()=>de([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),Qe={tabClick:(e,o,b)=>b instanceof Event,tabRemove:(e,o)=>o instanceof Event},oe="ElTabNav",Ye=F({name:oe,props:He,emits:Qe,setup(e,{expose:o,emit:b}){const v=Z(W);v||ee(oe,"<el-tabs><tab-nav /></el-tabs>");const t=K("tabs"),s=Te(),u=Pe(),f=w(),h=w(),C=w(),_=w(),i=w(!1),p=w(0),l=w(!1),y=w(!0),m=L(()=>["top","bottom"].includes(v.props.tabPosition)?"width":"height"),R=L(()=>({transform:`translate${m.value==="width"?"X":"Y"}(-${p.value}px)`})),n=()=>{if(!f.value)return;const r=f.value[`offset${A(m.value)}`],c=p.value;if(!c)return;const a=c>r?c-r:0;p.value=a},$=()=>{if(!f.value||!h.value)return;const r=h.value[`offset${A(m.value)}`],c=f.value[`offset${A(m.value)}`],a=p.value;if(r-a<=c)return;const T=r-a>c*2?a+c:r-c;p.value=T},x=async()=>{const r=h.value;if(!i.value||!C.value||!f.value||!r)return;await te();const c=C.value.querySelector(".is-active");if(!c)return;const a=f.value,T=["top","bottom"].includes(v.props.tabPosition),P=c.getBoundingClientRect(),N=a.getBoundingClientRect(),k=T?r.offsetWidth-N.width:r.offsetHeight-N.height,E=p.value;let g=E;T?(P.left<N.left&&(g=E-(N.left-P.left)),P.right>N.right&&(g=E+P.right-N.right)):(P.top<N.top&&(g=E-(N.top-P.top)),P.bottom>N.bottom&&(g=E+(P.bottom-N.bottom))),g=Math.max(g,0),p.value=Math.min(g,k)},B=()=>{var r;if(!h.value||!f.value)return;e.stretch&&((r=_.value)==null||r.update());const c=h.value[`offset${A(m.value)}`],a=f.value[`offset${A(m.value)}`],T=p.value;a<c?(i.value=i.value||{},i.value.prev=T,i.value.next=T+a<c,c-T<a&&(p.value=c-a)):(i.value=!1,T>0&&(p.value=0))},S=r=>{const c=r.code,{up:a,down:T,left:P,right:N}=I;if(![a,T,P,N].includes(c))return;const k=Array.from(r.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),E=k.indexOf(r.target);let g;c===P||c===a?E===0?g=k.length-1:g=E-1:E<k.length-1?g=E+1:g=0,k[g].focus({preventScroll:!0}),k[g].click(),O()},O=()=>{y.value&&(l.value=!0)},j=()=>l.value=!1;return M(s,r=>{r==="hidden"?y.value=!1:r==="visible"&&setTimeout(()=>y.value=!0,50)}),M(u,r=>{r?setTimeout(()=>y.value=!0,50):y.value=!1}),Y(C,B),ue(()=>setTimeout(()=>x(),0)),we(()=>B()),o({scrollToActiveTab:x,removeFocus:j}),()=>{const r=i.value?[d("span",{class:[t.e("nav-prev"),t.is("disabled",!i.value.prev)],onClick:n},[d(D,null,{default:()=>[d(Se,null,null)]})]),d("span",{class:[t.e("nav-next"),t.is("disabled",!i.value.next)],onClick:$},[d(D,null,{default:()=>[d(Ee,null,null)]})])]:null,c=e.panes.map((a,T)=>{var P,N,k,E;const g=a.uid,q=a.props.disabled,X=(N=(P=a.props.name)!=null?P:a.index)!=null?N:`${T}`,H=!q&&(a.isClosable||e.editable);a.index=`${T}`;const me=H?d(D,{class:"is-icon-close",onClick:V=>b("tabRemove",a,V)},{default:()=>[d($e,null,null)]}):null,he=((E=(k=a.slots).label)==null?void 0:E.call(k))||a.props.label,ye=!q&&a.active?0:-1;return d("div",{ref:`tab-${g}`,class:[t.e("item"),t.is(v.props.tabPosition),t.is("active",a.active),t.is("disabled",q),t.is("closable",H),t.is("focus",l.value)],id:`tab-${X}`,key:`tab-${g}`,"aria-controls":`pane-${X}`,role:"tab","aria-selected":a.active,tabindex:ye,onFocus:()=>O(),onBlur:()=>j(),onClick:V=>{j(),b("tabClick",a,X,V)},onKeydown:V=>{H&&(V.code===I.delete||V.code===I.backspace)&&b("tabRemove",a,V)}},[he,me])});return d("div",{ref:C,class:[t.e("nav-wrap"),t.is("scrollable",!!i.value),t.is(v.props.tabPosition)]},[r,d("div",{class:t.e("nav-scroll"),ref:f},[d("div",{class:[t.e("nav"),t.is(v.props.tabPosition),t.is("stretch",e.stretch&&["top","bottom"].includes(v.props.tabPosition))],ref:h,style:R.value,role:"tablist",onKeydown:S},[e.type?null:d(Xe,{ref:_,tabs:[...e.panes]},null),c])])])}}}),Ge=U({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:J(Function),default:()=>!0},stretch:Boolean}),Q=e=>Oe(e)||ke(e),Je={[be]:e=>Q(e),tabClick:(e,o)=>o instanceof Event,tabChange:e=>Q(e),edit:(e,o)=>["remove","add"].includes(o),tabRemove:e=>Q(e),tabAdd:()=>!0},Ze=F({name:"ElTabs",props:Ge,emits:Je,setup(e,{emit:o,slots:b,expose:v}){var t;const s=K("tabs"),u=L(()=>["left","right"].includes(e.tabPosition)),{children:f,addChild:h,removeChild:C}=Ke(ae(),"ElTabPane"),_=w(),i=w((t=e.modelValue)!=null?t:"0"),p=async(n,$=!1)=>{var x,B,S;if(!(i.value===n||se(n)))try{await((x=e.beforeLeave)==null?void 0:x.call(e,n,i.value))!==!1&&(i.value=n,$&&(o(be,n),o("tabChange",n)),(S=(B=_.value)==null?void 0:B.removeFocus)==null||S.call(B))}catch{}},l=(n,$,x)=>{n.props.disabled||(p($,!0),o("tabClick",n,x))},y=(n,$)=>{n.props.disabled||se(n.props.name)||($.stopPropagation(),o("edit",n.props.name,"remove"),o("tabRemove",n.props.name))},m=()=>{o("edit",void 0,"add"),o("tabAdd")};M(()=>e.modelValue,n=>p(n)),M(i,async()=>{var n;await te(),(n=_.value)==null||n.scrollToActiveTab()}),xe(W,{props:e,currentName:i,registerPane:n=>{f.value.push(n)},sortPane:h,unregisterPane:C}),v({currentName:i});const R=({render:n})=>n();return()=>{const n=b["add-icon"],$=e.editable||e.addable?d("div",{class:[s.e("new-tab"),u.value&&s.e("new-tab-vertical")],tabindex:"0",onClick:m,onKeydown:S=>{S.code===I.enter&&m()}},[n?G(b,"add-icon"):d(D,{class:s.is("icon-plus")},{default:()=>[d(Be,null,null)]})]):null,x=d("div",{class:[s.e("header"),u.value&&s.e("header-vertical"),s.is(e.tabPosition)]},[d(R,{render:()=>{const S=f.value.some(O=>O.slots.label);return d(Ye,{ref:_,currentName:i.value,editable:e.editable,type:e.type,panes:f.value,stretch:e.stretch,onTabClick:l,onTabRemove:y},{$stable:!S})}},null),$]),B=d("div",{class:s.e("content")},[G(b,"default")]);return d("div",{class:[s.b(),s.m(e.tabPosition),{[s.m("card")]:e.type==="card",[s.m("border-card")]:e.type==="border-card"}]},[B,x])}}}),et=U({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),fe="ElTabPane",tt=F({name:fe}),at=F({...tt,props:et,setup(e){const o=e,b=ae(),v=Re(),t=Z(W);t||ee(fe,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const s=K("tab-pane"),u=w(),f=L(()=>o.closable||t.props.closable),h=ne(()=>{var l;return t.currentName.value===((l=o.name)!=null?l:u.value)}),C=w(h.value),_=L(()=>{var l;return(l=o.name)!=null?l:u.value}),i=ne(()=>!o.lazy||C.value||h.value);M(h,l=>{l&&(C.value=!0)});const p=ze({uid:b.uid,slots:v,props:o,paneName:_,active:h,index:u,isClosable:f});return t.registerPane(p),ue(()=>{t.sortPane(p)}),Ae(()=>{t.unregisterPane(p.uid)}),(l,y)=>z(i)?Ve((le(),re("div",{key:0,id:`pane-${z(_)}`,class:ie(z(s).b()),role:"tabpanel","aria-hidden":!z(h),"aria-labelledby":`tab-${z(_)}`},[G(l.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[Me,z(h)]]):Fe("v-if",!0)}});var pe=ce(at,[["__file","tab-pane.vue"]]);const it=Le(Ze,{TabPane:pe}),ct=De(pe);export{ct as E,it as a};
