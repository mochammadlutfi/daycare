import{S as T}from"./SelectKelompok-18afe301.js";import{S as q}from"./SelectPaket-68dca016.js";import{_ as z,J as P,m as h,o as u,e as v,w as o,f as s,p as e,K as p,g as y,a5 as U,t as d,j as w,$ as j}from"./id-44e39273.js";import{h as N}from"./moment-fbc5633a.js";import{E as Y,a as A}from"./index-88bb1aa7.js";import{E as F,a as K}from"./index-84ed3e91.js";import{E as R}from"./index-4ea0d70f.js";import{E as J,a as O}from"./index-b7b101e9.js";import{E as G}from"./index-11481b41.js";import{E as H,a as Q}from"./index-aa7e31ad.js";import{E as W}from"./index-f9851f1c.js";import{v as X}from"./directive-cd218522.js";import"./index-10bd6a9f.js";import"./event-9519ab40.js";import"./scroll-bd36456a.js";import"./index-9f983416.js";import"./_initCloneObject-24df7827.js";import"./_baseIteratee-982954bc.js";import"./typescript-defaf979.js";import"./isArrayLikeObject-b43587b5.js";import"./raf-3ca20a2c.js";import"./index-05777cc1.js";import"./vnode-eeb9e0f5.js";const Z={components:{SelectKelompok:T,SelectPaket:q},data(){return{kota_id:null,selected:[],data:[],isLoading:!0,page:1,pageSize:0,limit:5,total:0,from:0,to:0,params:{page:1,limit:25,q:""},exportModal:!1,form:{kelompok:null,paket:null}}},async created(){await this.fetchData()},methods:{async setFilter(){this.daerahSelect=!1,await this.fetchData()},doSearch:_.debounce(function(){this.isLoading=!0,this.fetchData()},1e3),async fetchData(t){var t=t??1;try{this.isLoading=!0;const n=await P.get(this.route("admin.invoice.data"),{params:{page:t,limit:this.params.limit,q:this.params.q}});n.status==200&&(this.data=n.data.data,this.params.page=n.data.current_page,this.total=n.data.total,this.pageSize=n.data.per_page,this.from=n.data.from,this.to=n.data.to),this.isLoading=!1}catch(n){console.error(n)}},selectAll(i){i.target.checked?this.dataList.data.forEach((t,n)=>{this.selected.push(t.id)}):this.selected=[]},format_date(i){if(i)return N(String(i)).format("DD MMM YYYY")},getReport(){window.open(this.route("admin.invoice.report",this.form),"_blank")}}},$={class:"content"},ee={class:"content-heading d-flex justify-content-between align-items-center"},te=s("span",null,"Invoice",-1),oe={class:"space-x-1"},ae=s("i",{class:"fa fa-print me-1"},null,-1),le={class:"block rounded"},se={class:"block-content py-3"},ne=s("span",null,[s("i",{class:"fa fa-search"})],-1),ie={class:"block-content p-0"},re={key:0,class:"badge bg-primary"},pe={key:1,class:"badge bg-danger"},me=["href"],de=s("i",{class:"fa fa-eye me-1"},null,-1),ce={class:"block-content py-2"},_e={class:"my-auto text-xs"},ue={class:"d-flex"},fe={class:"float-end"};function ge(i,t,n,he,a,m){const f=j,g=Y,x=A,c=F,E=R,b=K,r=J,V=O,S=G,D=h("select-kelompok"),k=H,C=h("select-paket"),M=Q,B=W,L=h("base-layout"),I=X;return u(),v(L,null,{default:o(()=>[s("div",$,[s("div",ee,[te,s("div",oe,[e(f,{type:"primary",onClick:t[0]||(t[0]=y(l=>a.exportModal=!0,["prevent"]))},{default:o(()=>[ae,p(" Export ")]),_:1})])]),s("div",le,[s("div",se,[e(b,{justify:"space-between"},{default:o(()=>[e(c,{span:12},{default:o(()=>[e(x,{modelValue:a.params.limit,"onUpdate:modelValue":t[1]||(t[1]=l=>a.params.limit=l),placeholder:"Pilih",style:{width:"115px"},onChange:t[2]||(t[2]=l=>m.fetchData(1))},{default:o(()=>[e(g,{label:"25",value:"25"}),e(g,{label:"50",value:"50"}),e(g,{label:"100",value:"100"})]),_:1},8,["modelValue"])]),_:1}),e(c,{span:7},{default:o(()=>[e(E,{modelValue:a.params.q,"onUpdate:modelValue":t[3]||(t[3]=l=>a.params.q=l),onInput:m.doSearch,clearable:""},{prefix:o(()=>[ne]),_:1},8,["modelValue","onInput"])]),_:1})]),_:1})]),s("div",ie,[U((u(),v(V,{data:a.data,class:"w-100","header-cell-class-name":"bg-body text-dark"},{default:o(()=>[e(r,{prop:"nomor",label:"Nomor",width:"220","header-align":"center"}),e(r,{prop:"user.nama",label:"Pengguna"}),e(r,{prop:"anak.nama",label:"Anak"}),e(r,{label:"Tanggal Tempo",align:"center"},{default:o(l=>[p(d(m.format_date(l.row.tgl_tempo)),1)]),_:1}),e(r,{label:"Status",align:"center"},{default:o(l=>[l.row.status=="paid"?(u(),w("span",re," Lunas ")):(u(),w("span",pe," Belum Bayar "))]),_:1}),e(r,{label:"Total",align:"center"},{default:o(l=>[p(d(i.currency(l.row.total)),1)]),_:1}),e(r,{label:"Aksi",align:"center",width:"180"},{default:o(l=>[s("a",{href:i.route("admin.invoice.show",{id:l.row.id}),class:"ep-button ep-button--primary"},[de,p(" Detail ")],8,me)]),_:1})]),_:1},8,["data"])),[[I,a.isLoading]])]),s("div",ce,[e(b,{justify:"space-between"},{default:o(()=>[e(c,{lg:12,class:"d-flex"},{default:o(()=>[s("p",_e,"Menampilkan "+d(a.from)+" sampai "+d(a.to)+" dari "+d(a.total),1)]),_:1}),e(c,{lg:12,class:"text-end"},{default:o(()=>[e(S,{class:"float-end",background:"",layout:"prev, pager, next","page-size":a.pageSize,total:a.total,"current-page":a.page,onCurrentChange:m.fetchData},null,8,["page-size","total","current-page","onCurrentChange"])]),_:1})]),_:1})])])]),e(B,{modelValue:a.exportModal,"onUpdate:modelValue":t[7]||(t[7]=l=>a.exportModal=l),title:"Export",width:"500"},{default:o(()=>[e(M,{"label-width":"30%",onSubmit:y(m.getReport,["prevent"]),target:"_blank","label-position":"top"},{default:o(()=>[e(k,{class:"mb-4",label:"Kelompok"},{default:o(()=>[e(D,{name:"kelompok",modelValue:a.form.kelompok,"onUpdate:modelValue":t[4]||(t[4]=l=>a.form.kelompok=l)},null,8,["modelValue"])]),_:1}),e(k,{class:"mb-4",label:"Paket"},{default:o(()=>[e(C,{name:"paket",modelValue:a.form.paket,"onUpdate:modelValue":t[5]||(t[5]=l=>a.form.paket=l)},null,8,["modelValue"])]),_:1}),s("div",ue,[s("div",fe,[e(f,{onClick:t[6]||(t[6]=l=>a.exportModal=!1)},{default:o(()=>[p("Batal")]),_:1}),e(f,{type:"primary","native-type":"submit"},{default:o(()=>[p(" Download ")]),_:1})])])]),_:1},8,["onSubmit"])]),_:1},8,["modelValue"])]),_:1})}const Ae=z(Z,[["render",ge]]);export{Ae as default};
