import{S as T}from"./SelectKelompok-15197cc3.js";import{_ as M,m as _,o as p,e as D,w as o,f as n,p as t,t as f,a6 as C,j as S,L as h,g as Y,a0 as j}from"./id-97c9e5f5.js";import{E as L}from"./index-add84256.js";import{E as U,a as F}from"./index-4f1c3644.js";import{E as K,a as N}from"./index-1567bcf2.js";import{E as A,a as O}from"./index-ec964314.js";import{E as I}from"./index-ae963a16.js";import{v as P}from"./directive-7739a56c.js";import"./index-bcb34dd7.js";import"./index-4a89f490.js";import"./event-9519ab40.js";import"./scroll-1fa1a40e.js";import"./index-91a35dc4.js";import"./_initCloneObject-9298e566.js";import"./_baseIteratee-2fd9a4cf.js";import"./panel-time-pick-fb908530.js";import"./utils-d081b9ca.js";import"./localeData-5bb316e4.js";import"./typescript-defaf979.js";import"./isArrayLikeObject-55c2e828.js";import"./raf-85a89f42.js";const G={components:{SelectKelompok:T},props:{value:{type:Object},editMode:{type:Boolean,default:!1},errors:{type:Object}},data(){return{title:"Tambah Transaksi Laundry",disableKota:!1,form:{tgl:null,kelompok_id:null},lines:[],loading:!1}},created(){this.editMode&&this.setValue()},methods:{setValue(){this.title="Ubah Transaksi Laundry",this.form.id=this.value.id,this.form.kelompok_id=this.value.kelompok_id,this.form.anak_id=this.value.anak_id,this.form.tgl=this.value.tgl,this.form.jam=this.value.jam,this.value.detail.length&&this.value.detail.forEach(e=>{this.lines.push({id:e.id,anak_id:e.anak_id,user_id:e.user_id,anak_nama:e.anak.nama,berat:e.berat})})},async fetchAnak(){try{this.isLoading=!0,this.lines=[];const e=await axios.get(this.route("admin.anak.data"),{params:{kelompok_id:this.form.kelompok_id,laundry:!0}});e.status==200&&e.data.forEach((a,s)=>{this.lines.push({id:null,anak_id:a.id,user_id:a.user_id,anak_nama:a.nama,berat:null})}),this.isLoading=!1}catch(e){console.error(e)}},submit(){this.loading=!0;let e=Object.assign(this.form,{lines:this.lines}),a=this.$inertia.form(e),s=this.editMode===!0?this.route("admin.laundry.update",{id:this.value.id}):this.route("admin.laundry.store");a.post(s,{preserveScroll:!0,onFinish:()=>{this.loading=!1},onSuccess:()=>this.$swal.fire({icon:"success",title:"Berhasil",text:"Pendukung Baru Berhasil Ditambahkan!",showCancelButton:!0,confirmButtonText:"Tambah Lainnya",cancelButtonText:"Kembali"}).then(r=>{r.isConfirmed&&this.$inertia.visit(this.route("user.pendukung.create"))})})}}},R={class:"content"},q={class:"content-heading d-flex justify-content-between align-items-center"},z={class:"block rounded"},H={class:"block-content p-4"},J=n("span",null,"Gram",-1),Q=n("i",{class:"fa fa-check me-2"},null,-1);function W(e,a,s,r,l,m){const k=L,d=U,u=K,b=_("select-kelompok"),g=N,c=A,y=I,v=O,E=j,w=F,V=_("base-layout"),B=P;return p(),D(V,null,{default:o(()=>[n("div",R,[t(w,{"label-position":"top","label-width":"100%",onSubmit:Y(m.submit,["prevent"])},{default:o(()=>[n("div",q,[n("span",null,f(l.title),1)]),n("div",z,[C((p(),S("div",H,[t(g,{gutter:40},{default:o(()=>[t(u,{md:12},{default:o(()=>[t(d,{label:"Tanggal",error:s.errors.tgl},{default:o(()=>[t(k,{modelValue:l.form.tgl,"onUpdate:modelValue":a[0]||(a[0]=i=>l.form.tgl=i),type:"date",placeholder:"Tanggal",format:"DD MMMM YYYY","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["error"])]),_:1}),t(u,{md:12},{default:o(()=>[t(d,{label:"Kelompok",error:s.errors.kelompok_id},{default:o(()=>[t(b,{modelValue:l.form.kelompok_id,"onUpdate:modelValue":a[1]||(a[1]=i=>l.form.kelompok_id=i),onChange:m.fetchAnak,laundry:""},null,8,["modelValue","onChange"])]),_:1},8,["error"])]),_:1})]),_:1}),t(v,{data:l.lines,border:"",class:"mb-4",id:"variant"},{default:o(()=>[t(c,{label:"Nama Anak"},{default:o(i=>[h(f(i.row.anak_nama),1)]),_:1}),t(c,{label:"Berat"},{default:o(i=>[t(y,{modelValue:i.row.berat,"onUpdate:modelValue":x=>i.row.berat=x},{suffix:o(()=>[J]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"]),t(E,{"native-type":"submit",type:"primary",loading:l.loading},{default:o(()=>[Q,h(" Simpan ")]),_:1},8,["loading"])])),[[B,l.loading]])])]),_:1},8,["onSubmit"])])]),_:1})}const be=M(G,[["render",W]]);export{be as default};
