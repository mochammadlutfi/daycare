import{_ as I,K as L,m as E,o as g,e as b,w as t,f as l,p as e,L as c,a6 as D,g as V,t as w,a0 as z,q as N,u as Y,v as A}from"./id-3481afe5.js";import{h as J}from"./moment-fbc5633a.js";import{S as O}from"./SelectJenisKegiatan-9dc46ddf.js";import{E as x}from"./index-6f4b141f.js";import{E as q}from"./index-b64fb6eb.js";import{E as H,a as R}from"./index-39beff3f.js";import{E as G,a as Q}from"./index-64ddff80.js";import{E as W}from"./index-b6dcfd92.js";import{E as X,a as Z}from"./index-7888d8ea.js";import{E as $}from"./index-34caf5a7.js";import{E as ee,a as te}from"./index-361ca79f.js";import{E as oe}from"./index-7afa1b35.js";import{v as ae}from"./directive-3586f8b3.js";import"./typescript-defaf979.js";import"./index-0767bb4b.js";import"./scroll-bcd136fa.js";import"./vnode-c8d30334.js";import"./index-facbdfef.js";import"./event-9519ab40.js";import"./index-a3279758.js";import"./_initCloneObject-eb6e072f.js";import"./_baseIteratee-e7ebdd39.js";import"./isArrayLikeObject-ad341f20.js";import"./raf-3d0315fc.js";const se={components:{SelectJenisKegiatan:O},props:{errors:{type:Object}},data(){return{selected:[],data:[],isLoading:!0,page:1,pageSize:0,searchKey:"nama",searchKeyword:"",limit:25,total:0,showForm:!1,sort:"nama",sortDir:"ASC",formTitle:"Tambah Kegiatan",from:0,to:0,form:{id:null,nama:null,tipe:null,jenis_id:null,indikator:null},editMode:!1,loadingForm:!1}},async created(){await this.fetchData()},methods:{sortChange(i){this.sort=i.prop,this.sortDir=i.order=="ascending"?"ASC":"DESC",this.fetchData()},doSearch:_.debounce(function(){this.isLoading=!0,this.fetchData()},1e3),async fetchData(a){var a=a??1;try{this.isLoading=!0;const n=await L.get(this.route("admin.kegiatan.data"),{params:{page:a,limit:this.limit,sort:this.sort,sortDir:this.sortDir,search:this.searchKeyword,searchKey:this.searchKey}});n.status==200&&(this.data=n.data.data,this.page=n.data.current_page,this.total=n.data.total,this.pageSize=n.data.per_page,this.from=n.data.from,this.to=n.data.to),this.isLoading=!1}catch(n){console.error(n)}},format_date(i){if(i)return J(String(i)).format("DD MMMM YYYY")},onCloseForm(){this.title="Tambah Kegiatan",this.editMode=!1,this.form.id=null,this.form.nama=null,this.form.admin_id=null,this.form.usia=null,this.showForm=!1},submit(){this.loadingForm=!0;let i=this.$inertia.form(this.form),a=this.editMode==!0?this.route("admin.kegiatan.update",{id:this.form.id}):this.route("admin.kegiatan.store");i.post(a,{preserveScroll:!0,onFinish:()=>{this.loadingForm=!1,this.fetchData()},onSuccess:()=>{x({type:"success",message:"Data Berhasil Disimpan!"}),this.onCloseForm()}})},edit(i){this.formTitle="Ubah Kegiatan",this.form.id=i.id,this.form.nama=i.nama,this.form.admin_id=i.admin_id,this.form.usia=i.usia,this.editMode=!0,this.showForm=!0},hapus(i){q.alert("Data yang dihapus tidak bisa dikembalikan!","Peringatan",{showCancelButton:!0,confirmButtonText:"Ya!",cancelButtonText:"Tidak!",type:"warning"}).then(()=>{this.$inertia.delete(this.route("admin.kegiatan.delete",{id:i}),{preserveScroll:!0,onSuccess:()=>{this.fetchData(),x({type:"success",message:"Data Berhasil Dihapus!"})}})})}}},le={class:"content"},ie={class:"content-heading d-flex justify-content-between align-items-center"},ne=l("span",null,"Kegiatan",-1),re={class:"space-x-1"},me={class:"block block-rounded"},de={class:"block-content py-3"},ce=l("span",null,[l("i",{class:"fa fa-search"})],-1),ue={class:"block-content p-0"},pe=l("i",{class:"fa fa-angle-down ms-1"},null,-1),fe=l("i",{class:"si fa-fw si-note"},null,-1),_e=l("i",{class:"si fa-fw si-trash"},null,-1),he={class:"block-content py-2"},ge={class:"my-auto fs-sm"},be={class:"dialog-footer"},we=l("i",{class:"fa fa-close me-2"},null,-1),ke=l("i",{class:"fa fa-check me-2"},null,-1);function ye(i,a,n,Ce,o,r){const u=z,m=H,k=R,p=G,h=W,y=Q,d=X,C=N,S=Y,F=A,K=Z,T=$,f=ee,M=E("select-jenis-kegiatan"),j=te,B=oe,P=E("base-layout"),v=ae;return g(),b(P,null,{default:t(()=>[l("div",le,[l("div",ie,[ne,l("div",re,[e(u,{onClick:a[0]||(a[0]=s=>o.showForm=!0),type:"primary"},{default:t(()=>[c(" Tambah ")]),_:1})])]),l("div",me,[l("div",de,[e(y,{justify:"space-between"},{default:t(()=>[e(p,{span:12},{default:t(()=>[e(k,{modelValue:o.limit,"onUpdate:modelValue":a[1]||(a[1]=s=>o.limit=s),placeholder:"Pilih",style:{width:"115px"},onChange:a[2]||(a[2]=s=>r.fetchData(1))},{default:t(()=>[e(m,{label:"25",value:"25"}),e(m,{label:"50",value:"50"}),e(m,{label:"100",value:"100"})]),_:1},8,["modelValue"])]),_:1}),e(p,{span:8},{default:t(()=>[e(h,{modelValue:o.searchKeyword,"onUpdate:modelValue":a[3]||(a[3]=s=>o.searchKeyword=s),onInput:r.doSearch,clearable:""},{prefix:t(()=>[ce]),_:1},8,["modelValue","onInput"])]),_:1})]),_:1})]),l("div",ue,[D((g(),b(K,{data:o.data,class:"table-click",style:{width:"100%"},onSortChange:r.sortChange},{default:t(()=>[e(d,{type:"index",width:"50"}),e(d,{prop:"nama",label:"Nama",sortable:""}),e(d,{prop:"jenis.nama",label:"Jenis",sortable:""}),e(d,{prop:"tipe",label:"Tipe",sortable:""}),e(d,{prop:"indikator",label:"Indikator",sortable:""}),e(d,{label:"Aksi",align:"center",width:"180"},{default:t(s=>[e(F,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:t(()=>[e(S,null,{default:t(()=>[e(C,{class:"d-flex align-items-center justify-content-between space-x-1",onClick:V(U=>r.edit(s.row),["prevent"])},{default:t(()=>[c(" Ubah "),fe]),_:2},1032,["onClick"]),e(C,{class:"d-flex align-items-center justify-content-between space-x-1",onClick:V(U=>r.hapus(s.row.id),["prevent"])},{default:t(()=>[c(" Hapus "),_e]),_:2},1032,["onClick"])]),_:2},1024)]),default:t(()=>[e(u,{type:"primary"},{default:t(()=>[c(" Aksi "),pe]),_:1})]),_:2},1024)]),_:1})]),_:1},8,["data","onSortChange"])),[[v,o.isLoading]])]),l("div",he,[e(y,{justify:"space-between"},{default:t(()=>[e(p,{lg:12,class:"d-flex"},{default:t(()=>[l("p",ge,"Menampilkan "+w(o.from)+" sampai "+w(o.to)+" dari "+w(o.total),1)]),_:1}),e(p,{lg:12,class:"text-end"},{default:t(()=>[e(T,{class:"float-end",background:"",layout:"prev, pager, next","page-size":o.pageSize,total:o.total,"current-page":o.page,onCurrentChange:r.fetchData},null,8,["page-size","total","current-page","onCurrentChange"])]),_:1})]),_:1})])])]),D((g(),b(B,{modelValue:o.showForm,"onUpdate:modelValue":a[8]||(a[8]=s=>o.showForm=s),title:o.formTitle,width:"40%","before-close":r.onCloseForm},{footer:t(()=>[l("span",be,[e(u,{onClick:r.onCloseForm},{default:t(()=>[we,c(" Batal ")]),_:1},8,["onClick"]),e(u,{type:"primary",onClick:r.submit},{default:t(()=>[ke,c(" Simpan ")]),_:1},8,["onClick"])])]),default:t(()=>[e(j,{model:o.form,"label-position":"top"},{default:t(()=>[e(f,{label:"Nama",error:n.errors.nama},{default:t(()=>[e(h,{modelValue:o.form.nama,"onUpdate:modelValue":a[4]||(a[4]=s=>o.form.nama=s),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["error"]),e(f,{label:"Jenis Kegiatan",error:n.errors.admin_id},{default:t(()=>[e(M,{modelValue:o.form.jenis_id,"onUpdate:modelValue":a[5]||(a[5]=s=>o.form.jenis_id=s)},null,8,["modelValue"])]),_:1},8,["error"]),e(f,{label:"Tipe",error:n.errors.tipe},{default:t(()=>[e(k,{modelValue:o.form.tipe,"onUpdate:modelValue":a[6]||(a[6]=s=>o.form.tipe=s),placeholder:"Pilih",class:"w-100"},{default:t(()=>[e(m,{label:"Perkembangan",value:"Perkembangan"}),e(m,{label:"Pertumbuhan",value:"Pertumbuhan"}),e(m,{label:"Pembiasaan",value:"Pembiasaan"})]),_:1},8,["modelValue"])]),_:1},8,["error"]),e(f,{label:"Indikator",error:n.errors.indikator},{default:t(()=>[e(h,{modelValue:o.form.indikator,"onUpdate:modelValue":a[7]||(a[7]=s=>o.form.indikator=s),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["error"])]),_:1},8,["model"])]),_:1},8,["modelValue","title","before-close"])),[[v,o.loadingForm]])]),_:1})}const Re=I(se,[["render",ye]]);export{Re as default};
