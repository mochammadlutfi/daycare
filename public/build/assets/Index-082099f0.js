import{S as I}from"./SelectKelompok-ed653d16.js";import{S as q}from"./SelectPaket-7e4e2f12.js";import{_ as z,K as P,m as g,o as u,e as y,w as a,f as s,L as p,p as e,g as v,a6 as U,t as d,j as w,a0 as j}from"./id-3481afe5.js";import{h as N}from"./moment-fbc5633a.js";import{E as Y,a as A}from"./index-39beff3f.js";import{E as F,a as K}from"./index-64ddff80.js";import{E as R}from"./index-b6dcfd92.js";import{E as O,a as G}from"./index-7888d8ea.js";import{E as H}from"./index-34caf5a7.js";import{E as J,a as Q}from"./index-361ca79f.js";import{E as W}from"./index-7afa1b35.js";import{v as X}from"./directive-3586f8b3.js";import"./index-facbdfef.js";import"./event-9519ab40.js";import"./scroll-bcd136fa.js";import"./index-a3279758.js";import"./_initCloneObject-eb6e072f.js";import"./_baseIteratee-e7ebdd39.js";import"./typescript-defaf979.js";import"./isArrayLikeObject-ad341f20.js";import"./raf-3d0315fc.js";import"./index-0767bb4b.js";import"./vnode-c8d30334.js";const Z={components:{SelectKelompok:I,SelectPaket:q},data(){return{kota_id:null,selected:[],data:[],isLoading:!0,page:1,pageSize:0,limit:5,total:0,from:0,to:0,params:{page:1,limit:25,q:""},exportModal:!1,form:{kelompok:null,paket:null}}},async created(){await this.fetchData()},methods:{async setFilter(){this.daerahSelect=!1,await this.fetchData()},doSearch:_.debounce(function(){this.isLoading=!0,this.fetchData()},1e3),async fetchData(t){var t=t??1;try{this.isLoading=!0;const n=await P.get(this.route("admin.invoice.data"),{params:{page:t,limit:this.params.limit,q:this.params.q}});n.status==200&&(this.data=n.data.data,this.params.page=n.data.current_page,this.total=n.data.total,this.pageSize=n.data.per_page,this.from=n.data.from,this.to=n.data.to),this.isLoading=!1}catch(n){console.error(n)}},selectAll(i){i.target.checked?this.dataList.data.forEach((t,n)=>{this.selected.push(t.id)}):this.selected=[]},format_date(i){if(i)return N(String(i)).format("DD MMM YYYY")},getReport(){window.open(this.route("admin.invoice.report",this.form),"_blank")}}},$={class:"content"},ee={class:"content-heading d-flex justify-content-between align-items-center"},te=s("span",null,"Invoice",-1),ae={class:"space-x-1"},oe=["href"],le=s("i",{class:"fa fa-plus me-1"},null,-1),se=s("i",{class:"fa fa-print me-1"},null,-1),ne={class:"block rounded"},ie={class:"block-content py-3"},re=s("span",null,[s("i",{class:"fa fa-search"})],-1),pe={class:"block-content p-0"},me={key:0,class:"badge bg-primary"},de={key:1,class:"badge bg-danger"},ce=["href"],_e=s("i",{class:"fa fa-eye me-1"},null,-1),ue={class:"block-content py-2"},fe={class:"my-auto text-xs"},he={class:"d-flex"},ge={class:"float-end"};function be(i,t,n,ke,o,m){const f=j,h=Y,E=A,c=F,x=R,b=K,r=O,V=G,S=H,D=g("select-kelompok"),k=J,C=g("select-paket"),M=Q,L=W,B=g("base-layout"),T=X;return u(),y(B,null,{default:a(()=>[s("div",$,[s("div",ee,[te,s("div",ae,[s("a",{href:i.route("admin.pegawai.create"),class:"ep-button ep-button--primary"},[le,p(" Tambah ")],8,oe),e(f,{type:"primary",onClick:t[0]||(t[0]=v(l=>o.exportModal=!0,["prevent"]))},{default:a(()=>[se,p(" Export ")]),_:1})])]),s("div",ne,[s("div",ie,[e(b,{justify:"space-between"},{default:a(()=>[e(c,{span:12},{default:a(()=>[e(E,{modelValue:o.params.limit,"onUpdate:modelValue":t[1]||(t[1]=l=>o.params.limit=l),placeholder:"Pilih",style:{width:"115px"},onChange:t[2]||(t[2]=l=>m.fetchData(1))},{default:a(()=>[e(h,{label:"25",value:"25"}),e(h,{label:"50",value:"50"}),e(h,{label:"100",value:"100"})]),_:1},8,["modelValue"])]),_:1}),e(c,{span:7},{default:a(()=>[e(x,{modelValue:o.params.q,"onUpdate:modelValue":t[3]||(t[3]=l=>o.params.q=l),onInput:m.doSearch,clearable:""},{prefix:a(()=>[re]),_:1},8,["modelValue","onInput"])]),_:1})]),_:1})]),s("div",pe,[U((u(),y(V,{data:o.data,class:"w-100","header-cell-class-name":"bg-body text-dark"},{default:a(()=>[e(r,{prop:"nomor",label:"Nomor",width:"220","header-align":"center"}),e(r,{prop:"user.nama",label:"Pengguna"}),e(r,{prop:"anak.nama",label:"Anak"}),e(r,{label:"Tanggal Tempo",align:"center"},{default:a(l=>[p(d(m.format_date(l.row.tgl_tempo)),1)]),_:1}),e(r,{label:"Status",align:"center"},{default:a(l=>[l.row.status=="paid"?(u(),w("span",me," Lunas ")):(u(),w("span",de," Belum Bayar "))]),_:1}),e(r,{label:"Total",align:"center"},{default:a(l=>[p(d(i.currency(l.row.total)),1)]),_:1}),e(r,{label:"Aksi",align:"center",width:"180"},{default:a(l=>[s("a",{href:i.route("admin.invoice.show",{id:l.row.id}),class:"ep-button ep-button--primary"},[_e,p(" Detail ")],8,ce)]),_:1})]),_:1},8,["data"])),[[T,o.isLoading]])]),s("div",ue,[e(b,{justify:"space-between"},{default:a(()=>[e(c,{lg:12,class:"d-flex"},{default:a(()=>[s("p",fe,"Menampilkan "+d(o.from)+" sampai "+d(o.to)+" dari "+d(o.total),1)]),_:1}),e(c,{lg:12,class:"text-end"},{default:a(()=>[e(S,{class:"float-end",background:"",layout:"prev, pager, next","page-size":o.pageSize,total:o.total,"current-page":o.page,onCurrentChange:m.fetchData},null,8,["page-size","total","current-page","onCurrentChange"])]),_:1})]),_:1})])])]),e(L,{modelValue:o.exportModal,"onUpdate:modelValue":t[7]||(t[7]=l=>o.exportModal=l),title:"Export",width:"500"},{default:a(()=>[e(M,{"label-width":"30%",onSubmit:v(m.getReport,["prevent"]),target:"_blank","label-position":"top"},{default:a(()=>[e(k,{class:"mb-4",label:"Kelompok"},{default:a(()=>[e(D,{name:"kelompok",modelValue:o.form.kelompok,"onUpdate:modelValue":t[4]||(t[4]=l=>o.form.kelompok=l)},null,8,["modelValue"])]),_:1}),e(k,{class:"mb-4",label:"Paket"},{default:a(()=>[e(C,{name:"paket",modelValue:o.form.paket,"onUpdate:modelValue":t[5]||(t[5]=l=>o.form.paket=l)},null,8,["modelValue"])]),_:1}),s("div",he,[s("div",ge,[e(f,{onClick:t[6]||(t[6]=l=>o.exportModal=!1)},{default:a(()=>[p("Batal")]),_:1}),e(f,{type:"primary","native-type":"submit"},{default:a(()=>[p(" Download ")]),_:1})])])]),_:1},8,["onSubmit"])]),_:1},8,["modelValue"])]),_:1})}const Ke=z(Z,[["render",be]]);export{Ke as default};
