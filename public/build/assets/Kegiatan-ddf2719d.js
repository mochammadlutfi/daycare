import{_ as I,J as N,m as E,o as c,e as p,w as a,f as n,p as e,K as u,a5 as V,g as D,t as w,$ as A,q as L,u as z,v as Y}from"./id-2e276a2e.js";import{h as J}from"./moment-fbc5633a.js";import{S as O}from"./SelectJenisKegiatan-ead90dcc.js";import{E as P}from"./index-d645a2bc.js";import{E as q}from"./index-522dba8d.js";import{E as H,a as R}from"./index-bb79b737.js";import{E as G,a as Q}from"./index-5bcbf47d.js";import{E as W}from"./index-57703201.js";import{E as X,a as Z}from"./index-a4208ec2.js";import{E as $}from"./index-3a9112db.js";import{E as ee,a as te}from"./index-23bc7dc4.js";import{E as ae}from"./index-593b96c3.js";import{v as oe}from"./directive-2e5632de.js";import"./typescript-defaf979.js";import"./index-80ddcb64.js";import"./scroll-bd1cd202.js";import"./vnode-f4803515.js";import"./index-20f4b275.js";import"./event-9519ab40.js";import"./index-a3b5a262.js";import"./_initCloneObject-8785b8d3.js";import"./_baseIteratee-0f2e46c6.js";import"./isArrayLikeObject-5cf94b9b.js";import"./raf-840075f3.js";const le={components:{SelectJenisKegiatan:O},props:{errors:{type:Object}},data(){return{selected:[],data:[],isLoading:!0,page:1,pageSize:0,searchKey:"nama",searchKeyword:"",limit:25,total:0,showForm:!1,sort:"nama",sortDir:"ASC",formTitle:"Tambah Kegiatan",from:0,to:0,form:{id:null,nama:null,tipe:null,jenis_id:null,indikator:null},editMode:!1,loadingForm:!1}},async created(){await this.fetchData()},methods:{sortChange(s){this.sort=s.prop,this.sortDir=s.order=="ascending"?"ASC":"DESC",this.fetchData()},doSearch:_.debounce(function(){this.isLoading=!0,this.fetchData()},1e3),async fetchData(o){var o=o??1;try{this.isLoading=!0;const i=await N.get(this.route("admin.kegiatan.data"),{params:{page:o,limit:this.limit,sort:this.sort,sortDir:this.sortDir,search:this.searchKeyword,searchKey:this.searchKey}});i.status==200&&(this.data=i.data.data,this.page=i.data.current_page,this.total=i.data.total,this.pageSize=i.data.per_page,this.from=i.data.from,this.to=i.data.to),this.isLoading=!1}catch(i){console.error(i)}},format_date(s){if(s)return J(String(s)).format("DD MMMM YYYY")},onCloseForm(){this.title="Tambah Kegiatan",this.editMode=!1,this.form.id=null,this.form.nama=null,this.form.admin_id=null,this.form.usia=null,this.showForm=!1},submit(){this.loadingForm=!0;let s=this.$inertia.form(this.form),o=this.editMode==!0?this.route("admin.kegiatan.update",{id:this.form.id}):this.route("admin.kegiatan.store");s.post(o,{preserveScroll:!0,onFinish:()=>{this.loadingForm=!1,this.fetchData()},onSuccess:()=>{P({type:"success",message:"Data Berhasil Disimpan!"}),this.onCloseForm()}})},edit(s){this.formTitle="Ubah Kegiatan",this.form.id=s.id,this.form.nama=s.nama,this.form.admin_id=s.admin_id,this.form.usia=s.usia,this.editMode=!0,this.showForm=!0},hapus(s){q.alert("Data yang dihapus tidak bisa dikembalikan!","Peringatan",{showCancelButton:!0,confirmButtonText:"Ya!",cancelButtonText:"Tidak!",type:"warning"}).then(()=>{this.$inertia.delete(this.route("admin.kegiatan.delete",{id:s}),{preserveScroll:!0,onSuccess:()=>{this.fetchData(),P({type:"success",message:"Data Berhasil Dihapus!"})}})})}}},ne={class:"content"},se={class:"content-heading d-flex justify-content-between align-items-center"},ie=n("span",null,"Kegiatan",-1),re={class:"space-x-1"},me={class:"block block-rounded"},de={class:"block-content py-3"},ue=n("span",null,[n("i",{class:"fa fa-search"})],-1),ce={class:"block-content p-0"},pe=n("i",{class:"fa fa-angle-down ms-1"},null,-1),fe=n("i",{class:"si fa-fw si-note"},null,-1),_e=n("i",{class:"si fa-fw si-trash"},null,-1),he={class:"block-content py-2"},ge={class:"my-auto fs-sm"},be={class:"dialog-footer"},ke=n("i",{class:"fa fa-close me-2"},null,-1),we=n("i",{class:"fa fa-check me-2"},null,-1);function ye(s,o,i,ve,t,m){const f=A,r=H,b=R,h=G,k=W,y=Q,d=X,v=L,S=z,x=Y,F=Z,K=$,g=ee,M=E("select-jenis-kegiatan"),T=te,B=ae,j=E("base-layout"),C=oe;return c(),p(j,null,{default:a(()=>[n("div",ne,[n("div",se,[ie,n("div",re,[e(f,{onClick:o[0]||(o[0]=l=>t.showForm=!0),type:"primary"},{default:a(()=>[u(" Tambah ")]),_:1})])]),n("div",me,[n("div",de,[e(y,{justify:"space-between"},{default:a(()=>[e(h,{span:12},{default:a(()=>[e(b,{modelValue:t.limit,"onUpdate:modelValue":o[1]||(o[1]=l=>t.limit=l),placeholder:"Pilih",style:{width:"115px"},onChange:o[2]||(o[2]=l=>m.fetchData(1))},{default:a(()=>[e(r,{label:"25",value:"25"}),e(r,{label:"50",value:"50"}),e(r,{label:"100",value:"100"})]),_:1},8,["modelValue"])]),_:1}),e(h,{span:8},{default:a(()=>[e(k,{modelValue:t.searchKeyword,"onUpdate:modelValue":o[3]||(o[3]=l=>t.searchKeyword=l),onInput:m.doSearch,clearable:""},{prefix:a(()=>[ue]),_:1},8,["modelValue","onInput"])]),_:1})]),_:1})]),n("div",ce,[V((c(),p(F,{data:t.data,class:"table-click",style:{width:"100%"},onSortChange:m.sortChange},{default:a(()=>[e(d,{type:"index",width:"50"}),e(d,{prop:"nama",label:"Nama",sortable:""}),e(d,{prop:"jenis.nama",label:"Jenis",sortable:""}),e(d,{prop:"tipe",label:"Tipe",sortable:""}),e(d,{prop:"indikator",label:"Indikator",sortable:""}),e(d,{label:"Aksi",align:"center",width:"180"},{default:a(l=>[e(x,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:a(()=>[e(S,null,{default:a(()=>[e(v,{class:"d-flex align-items-center justify-content-between space-x-1",onClick:D(U=>m.edit(l.row),["prevent"])},{default:a(()=>[u(" Ubah "),fe]),_:2},1032,["onClick"]),e(v,{class:"d-flex align-items-center justify-content-between space-x-1",onClick:D(U=>m.hapus(l.row.id),["prevent"])},{default:a(()=>[u(" Hapus "),_e]),_:2},1032,["onClick"])]),_:2},1024)]),default:a(()=>[e(f,{type:"primary"},{default:a(()=>[u(" Aksi "),pe]),_:1})]),_:2},1024)]),_:1})]),_:1},8,["data","onSortChange"])),[[C,t.isLoading]])]),n("div",he,[e(y,{justify:"space-between"},{default:a(()=>[e(h,{lg:12,class:"d-flex"},{default:a(()=>[n("p",ge,"Menampilkan "+w(t.from)+" sampai "+w(t.to)+" dari "+w(t.total),1)]),_:1}),e(h,{lg:12,class:"text-end"},{default:a(()=>[e(K,{class:"float-end",background:"",layout:"prev, pager, next","page-size":t.pageSize,total:t.total,"current-page":t.page,onCurrentChange:m.fetchData},null,8,["page-size","total","current-page","onCurrentChange"])]),_:1})]),_:1})])])]),V((c(),p(B,{modelValue:t.showForm,"onUpdate:modelValue":o[9]||(o[9]=l=>t.showForm=l),title:t.formTitle,width:"40%","before-close":m.onCloseForm},{footer:a(()=>[n("span",be,[e(f,{onClick:m.onCloseForm},{default:a(()=>[ke,u(" Batal ")]),_:1},8,["onClick"]),e(f,{type:"primary",onClick:m.submit},{default:a(()=>[we,u(" Simpan ")]),_:1},8,["onClick"])])]),default:a(()=>[e(T,{model:t.form,"label-position":"top"},{default:a(()=>[e(g,{label:"Nama",error:i.errors.nama},{default:a(()=>[e(k,{modelValue:t.form.nama,"onUpdate:modelValue":o[4]||(o[4]=l=>t.form.nama=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["error"]),e(g,{label:"Jenis Kegiatan",error:i.errors.admin_id},{default:a(()=>[e(M,{modelValue:t.form.jenis_id,"onUpdate:modelValue":o[5]||(o[5]=l=>t.form.jenis_id=l)},null,8,["modelValue"])]),_:1},8,["error"]),e(g,{label:"Tipe",error:i.errors.tipe},{default:a(()=>[e(b,{modelValue:t.form.tipe,"onUpdate:modelValue":o[6]||(o[6]=l=>t.form.tipe=l),placeholder:"Pilih",class:"w-100"},{default:a(()=>[e(r,{label:"Perkembangan",value:"Perkembangan"}),e(r,{label:"Pertumbuhan",value:"Pertumbuhan"}),e(r,{label:"Pembiasaan",value:"Pembiasaan"})]),_:1},8,["modelValue"])]),_:1},8,["error"]),e(g,{label:"Indikator",error:i.errors.indikator},{default:a(()=>[t.form.tipe=="Perkembangan"?(c(),p(b,{key:0,modelValue:t.form.indikator,"onUpdate:modelValue":o[7]||(o[7]=l=>t.form.indikator=l),placeholder:"Pilih",class:"w-100"},{default:a(()=>[e(r,{label:"Perkembangan Nilai Agama dan Moral",value:"Perkembangan Nilai Agama dan Moral"}),e(r,{label:"Perkembangan Sosial dan Emosional",value:"Perkembangan Sosial dan Emosional"}),e(r,{label:"Perkembangan Fisik dan Motorik",value:"Perkembangan Fisik dan Motorik"}),e(r,{label:"Perkembangan Kognitif",value:"Perkembangan Kognitif"}),e(r,{label:"Perkembangan Bahasa",value:"Perkembangan Bahasa"})]),_:1},8,["modelValue"])):(c(),p(k,{key:1,modelValue:t.form.indikator,"onUpdate:modelValue":o[8]||(o[8]=l=>t.form.indikator=l),autocomplete:"off"},null,8,["modelValue"]))]),_:1},8,["error"])]),_:1},8,["model"])]),_:1},8,["modelValue","title","before-close"])),[[C,t.loadingForm]])]),_:1})}const Re=I(le,[["render",ye]]);export{Re as default};
