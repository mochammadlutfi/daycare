import{_ as S,o as f,e as h,w as o,g as N,U as P,F as Y,K as J,m as D,f as s,p as e,L as u,a5 as E,j as V,t as k,$ as O,q,u as H,v as R}from"./id-1c1e2a8a.js";import{h as Q}from"./moment-fbc5633a.js";import{a as F,E as T}from"./index-e88e0ccf.js";import{E as x}from"./index-86db54a9.js";import{E as W}from"./index-bf383f5d.js";import{E as X,a as Z}from"./index-b29a4ac8.js";import{E as $}from"./index-9517473f.js";import{E as ee,a as te}from"./index-20a8f229.js";import{E as oe}from"./index-8d957708.js";import{E as ae,a as le}from"./index-dfa584b8.js";import{E as se}from"./index-7b664227.js";import{v as ne}from"./directive-d6b9c9af.js";import"./index-82c08022.js";import"./event-9519ab40.js";import"./scroll-3dccf429.js";import"./index-3f637f53.js";import"./_initCloneObject-9c7c6a23.js";import"./_baseIteratee-5480d325.js";import"./typescript-defaf979.js";import"./index-960b7304.js";import"./vnode-6226af66.js";import"./isArrayLikeObject-63f78cbe.js";import"./raf-a63b4db6.js";const ie={name:"SelectGuru",data(){return{dataList:[],value:this.modelValue,isLoading:!1}},watch:{modelValue(a){this.value=a}},props:{modelValue:{type:String}},async mounted(){await this.fetchData()},methods:{async fetchData(){try{this.isLoading=!0;const a=await axios.get(this.route("admin.pegawai.data"),{params:{level:"guru"}});a.status==200&&(this.dataList=[],this.dataList=a.data),this.isLoading=!1}catch(a){console.error(a)}},selectChange(a){this.$emit("update:modelValue",a)}}};function re(a,l,i,L,t,r){const c=T,d=F;return f(),h(d,{modelValue:t.value,"onUpdate:modelValue":l[0]||(l[0]=m=>t.value=m),"value-key":"id",class:"w-100",filterable:"",clearable:"",remote:"",onChange:r.selectChange,autocomplete:"off",loading:t.isLoading,placeholder:"Pilih Guru"},{default:o(()=>[(f(!0),N(Y,null,P(t.dataList,m=>(f(),h(c,{key:m.id,label:m.nama,value:m.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange","loading"])}const me=S(ie,[["render",re]]),de={components:{SelectGuru:me},props:{errors:{type:Object}},data(){return{selected:[],data:[],isLoading:!0,page:1,pageSize:0,searchKey:"nama",searchKeyword:"",limit:25,total:0,showForm:!1,sort:"nama",sortDir:"ASC",formTitle:"Tambah Kelompok",from:0,to:0,form:{id:null,nama:null,admin_id:null,usia:null},editMode:!1,loadingForm:!1}},async created(){await this.fetchData()},methods:{sortChange(a){this.sort=a.prop,this.sortDir=a.order=="ascending"?"ASC":"DESC",this.fetchData()},doSearch:_.debounce(function(){this.isLoading=!0,this.fetchData()},1e3),async fetchData(l){var l=l??1;try{this.isLoading=!0;const i=await J.get(this.route("admin.kelompok.data"),{params:{page:l,limit:this.limit,sort:this.sort,sortDir:this.sortDir,search:this.searchKeyword,searchKey:this.searchKey}});i.status==200&&(this.data=i.data.data,this.page=i.data.current_page,this.total=i.data.total,this.pageSize=i.data.per_page,this.from=i.data.from,this.to=i.data.to),this.isLoading=!1}catch(i){console.error(i)}},format_date(a){if(a)return Q(String(a)).format("DD MMMM YYYY")},onCloseForm(){this.title="Tambah Group kontak",this.editMode=!1,this.form.id=null,this.form.nama=null,this.form.admin_id=null,this.form.usia=null,this.showForm=!1},submit(){this.loadingForm=!0;let a=this.$inertia.form(this.form),l=this.editMode==!0?this.route("admin.kelompok.update",{id:this.form.id}):this.route("admin.kelompok.store");a.post(l,{preserveScroll:!0,onFinish:()=>{this.loadingForm=!1,this.fetchData()},onSuccess:()=>{x({type:"success",message:"Data Berhasil Disimpan!"}),this.onCloseForm()}})},edit(a){this.formTitle="Ubah Group Kontak",this.form.id=a.id,this.form.nama=a.nama,this.form.admin_id=a.admin_id,this.form.usia=a.usia,this.editMode=!0,this.showForm=!0},hapus(a){W.alert("Data yang dihapus tidak bisa dikembalikan!","Peringatan",{showCancelButton:!0,confirmButtonText:"Ya!",cancelButtonText:"Tidak!",type:"warning"}).then(()=>{this.$inertia.delete(this.route("admin.kelompok.delete",{id:a}),{preserveScroll:!0,onSuccess:()=>{this.fetchData(),x({type:"success",message:"Data Berhasil Dihapus!"})}})})}}},ue={class:"content"},ce={class:"content-heading d-flex justify-content-between align-items-center"},pe=s("span",null,"Kelompok",-1),fe={class:"space-x-1"},he={class:"block block-rounded"},_e={class:"block-content py-3"},ge=s("span",null,[s("i",{class:"fa fa-search"})],-1),be={class:"block-content p-0"},we=s("i",{class:"fa fa-angle-down ms-1"},null,-1),ke=["href"],ye=s("i",{class:"fa fa-fw fa-calendar-alt"},null,-1),ve=s("i",{class:"si fa-fw si-note"},null,-1),Ce=s("i",{class:"si fa-fw si-trash"},null,-1),De={class:"block-content py-2"},Ee={class:"my-auto fs-sm"},Ve={class:"dialog-footer"},xe=s("i",{class:"fa fa-close me-2"},null,-1),Se=s("i",{class:"fa fa-check me-2"},null,-1);function Fe(a,l,i,L,t,r){const c=O,d=T,m=F,g=X,y=$,v=Z,p=ee,b=q,B=H,K=R,M=te,U=oe,w=ae,j=D("select-guru"),G=le,z=se,A=D("base-layout"),C=ne;return f(),h(A,null,{default:o(()=>[s("div",ue,[s("div",ce,[pe,s("div",fe,[e(c,{onClick:l[0]||(l[0]=n=>t.showForm=!0),type:"primary"},{default:o(()=>[u(" Tambah ")]),_:1})])]),s("div",he,[s("div",_e,[e(v,{justify:"space-between"},{default:o(()=>[e(g,{span:12},{default:o(()=>[e(m,{modelValue:t.limit,"onUpdate:modelValue":l[1]||(l[1]=n=>t.limit=n),placeholder:"Pilih",style:{width:"115px"},onChange:l[2]||(l[2]=n=>r.fetchData(1))},{default:o(()=>[e(d,{label:"25",value:"25"}),e(d,{label:"50",value:"50"}),e(d,{label:"100",value:"100"})]),_:1},8,["modelValue"])]),_:1}),e(g,{span:8},{default:o(()=>[e(y,{modelValue:t.searchKeyword,"onUpdate:modelValue":l[3]||(l[3]=n=>t.searchKeyword=n),onInput:r.doSearch,clearable:""},{prefix:o(()=>[ge]),_:1},8,["modelValue","onInput"])]),_:1})]),_:1})]),s("div",be,[E((f(),h(M,{data:t.data,class:"table-click",style:{width:"100%"},onSortChange:r.sortChange},{default:o(()=>[e(p,{type:"index",width:"50"}),e(p,{prop:"nama",label:"Nama",sortable:""}),e(p,{prop:"admin.nama",label:"Guru",sortable:""}),e(p,{prop:"usia",label:"Usia",sortable:""}),e(p,{prop:"anak_count",label:"Jumlah Anak",sortable:""}),e(p,{label:"Aksi",align:"center",width:"180"},{default:o(n=>[e(K,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:o(()=>[e(B,null,{default:o(()=>[e(b,{class:"d-flex align-items-center justify-content-between space-x-1"},{default:o(()=>[s("a",{href:a.route("admin.kelompok.jadwal.index",{id:n.row.id})},[u(" Jadwal "),ye],8,ke)]),_:2},1024),e(b,{class:"d-flex align-items-center justify-content-between space-x-1",onClick:V(I=>r.edit(n.row),["prevent"])},{default:o(()=>[u(" Ubah "),ve]),_:2},1032,["onClick"]),e(b,{class:"d-flex align-items-center justify-content-between space-x-1",onClick:V(I=>r.hapus(n.row.id),["prevent"])},{default:o(()=>[u(" Hapus "),Ce]),_:2},1032,["onClick"])]),_:2},1024)]),default:o(()=>[e(c,{type:"primary"},{default:o(()=>[u(" Aksi "),we]),_:1})]),_:2},1024)]),_:1})]),_:1},8,["data","onSortChange"])),[[C,t.isLoading]])]),s("div",De,[e(v,{justify:"space-between"},{default:o(()=>[e(g,{lg:12,class:"d-flex"},{default:o(()=>[s("p",Ee,"Menampilkan "+k(t.from)+" sampai "+k(t.to)+" dari "+k(t.total),1)]),_:1}),e(g,{lg:12,class:"text-end"},{default:o(()=>[e(U,{class:"float-end",background:"",layout:"prev, pager, next","page-size":t.pageSize,total:t.total,"current-page":t.page,onCurrentChange:r.fetchData},null,8,["page-size","total","current-page","onCurrentChange"])]),_:1})]),_:1})])])]),E((f(),h(z,{modelValue:t.showForm,"onUpdate:modelValue":l[7]||(l[7]=n=>t.showForm=n),title:t.formTitle,width:"30%","before-close":r.onCloseForm},{footer:o(()=>[s("span",Ve,[e(c,{onClick:r.onCloseForm},{default:o(()=>[xe,u(" Batal ")]),_:1},8,["onClick"]),e(c,{type:"primary",onClick:r.submit},{default:o(()=>[Se,u(" Simpan ")]),_:1},8,["onClick"])])]),default:o(()=>[e(G,{model:t.form,"label-position":"top"},{default:o(()=>[e(w,{label:"Nama Kelompok",error:i.errors.nama},{default:o(()=>[e(y,{modelValue:t.form.nama,"onUpdate:modelValue":l[4]||(l[4]=n=>t.form.nama=n),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["error"]),e(w,{label:"Guru",error:i.errors.admin_id},{default:o(()=>[e(j,{modelValue:t.form.admin_id,"onUpdate:modelValue":l[5]||(l[5]=n=>t.form.admin_id=n)},null,8,["modelValue"])]),_:1},8,["error"]),e(w,{label:"Usia",error:i.errors.usia},{default:o(()=>[e(m,{modelValue:t.form.usia,"onUpdate:modelValue":l[6]||(l[6]=n=>t.form.usia=n),placeholder:"Pilih",class:"w-100"},{default:o(()=>[e(d,{label:"3 Bulan - 2,5 Tahun",value:"3 Bulan - 2,5 Tahun"}),e(d,{label:"2,5 Tahun - 6 Tahun",value:"3 Tahun- 6 Tahun"})]),_:1},8,["modelValue"])]),_:1},8,["error"])]),_:1},8,["model"])]),_:1},8,["modelValue","title","before-close"])),[[C,t.loadingForm]])]),_:1})}const $e=S(de,[["render",Fe]]);export{$e as default};
