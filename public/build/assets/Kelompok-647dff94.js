import{_ as S,o as h,e as f,w as o,j as N,S as P,F as Y,J,m as D,f as s,p as e,K as p,a5 as E,g as V,t as w,$ as O,q,u as H,v as R}from"./id-44e39273.js";import{h as Q}from"./moment-fbc5633a.js";import{a as F,E as T}from"./index-88bb1aa7.js";import{E as x}from"./index-ada9f14f.js";import{E as W}from"./index-8d5cd002.js";import{E as X,a as Z}from"./index-84ed3e91.js";import{E as $}from"./index-4ea0d70f.js";import{E as ee,a as te}from"./index-b7b101e9.js";import{E as oe}from"./index-11481b41.js";import{E as ae,a as le}from"./index-aa7e31ad.js";import{E as se}from"./index-f9851f1c.js";import{v as ne}from"./directive-cd218522.js";import"./index-10bd6a9f.js";import"./event-9519ab40.js";import"./scroll-bd36456a.js";import"./index-9f983416.js";import"./_initCloneObject-24df7827.js";import"./_baseIteratee-982954bc.js";import"./typescript-defaf979.js";import"./index-05777cc1.js";import"./vnode-eeb9e0f5.js";import"./isArrayLikeObject-b43587b5.js";import"./raf-3ca20a2c.js";const ie={name:"SelectGuru",data(){return{dataList:[],value:this.modelValue,isLoading:!1}},watch:{modelValue(l){this.value=l}},props:{modelValue:{type:String}},async mounted(){await this.fetchData()},methods:{async fetchData(){try{this.isLoading=!0;const l=await axios.get(this.route("admin.pegawai.data"),{params:{level:"guru"}});l.status==200&&(this.dataList=[],this.dataList=l.data),this.isLoading=!1}catch(l){console.error(l)}},selectChange(l){this.$emit("update:modelValue",l)}}};function re(l,a,i,L,t,r){const u=T,d=F;return h(),f(d,{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=m=>t.value=m),"value-key":"id",class:"w-100",filterable:"",clearable:"",remote:"",onChange:r.selectChange,autocomplete:"off",loading:t.isLoading,placeholder:"Pilih Guru"},{default:o(()=>[(h(!0),N(Y,null,P(t.dataList,m=>(h(),f(u,{key:m.id,label:m.nama,value:m.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange","loading"])}const me=S(ie,[["render",re]]),de={components:{SelectGuru:me},props:{errors:{type:Object}},data(){return{selected:[],data:[],isLoading:!0,page:1,pageSize:0,searchKey:"nama",searchKeyword:"",limit:25,total:0,showForm:!1,sort:"nama",sortDir:"ASC",formTitle:"Tambah Kelompok",from:0,to:0,form:{id:null,nama:null,admin_id:null,usia:null},editMode:!1,loadingForm:!1}},async created(){await this.fetchData()},methods:{sortChange(l){this.sort=l.prop,this.sortDir=l.order=="ascending"?"ASC":"DESC",this.fetchData()},doSearch:_.debounce(function(){this.isLoading=!0,this.fetchData()},1e3),async fetchData(a){var a=a??1;try{this.isLoading=!0;const i=await J.get(this.route("admin.kelompok.data"),{params:{page:a,limit:this.limit,sort:this.sort,sortDir:this.sortDir,search:this.searchKeyword,searchKey:this.searchKey}});i.status==200&&(this.data=i.data.data,this.page=i.data.current_page,this.total=i.data.total,this.pageSize=i.data.per_page,this.from=i.data.from,this.to=i.data.to),this.isLoading=!1}catch(i){console.error(i)}},format_date(l){if(l)return Q(String(l)).format("DD MMMM YYYY")},onCloseForm(){this.title="Tambah Group kontak",this.editMode=!1,this.form.id=null,this.form.nama=null,this.form.admin_id=null,this.form.usia=null,this.showForm=!1},submit(){this.loadingForm=!0;let l=this.$inertia.form(this.form),a=this.editMode==!0?this.route("admin.kelompok.update",{id:this.form.id}):this.route("admin.kelompok.store");l.post(a,{preserveScroll:!0,onFinish:()=>{this.loadingForm=!1,this.fetchData()},onSuccess:()=>{x({type:"success",message:"Data Berhasil Disimpan!"}),this.onCloseForm()}})},edit(l){this.formTitle="Ubah Group Kontak",this.form.id=l.id,this.form.nama=l.nama,this.form.admin_id=l.admin_id,this.form.usia=l.usia,this.editMode=!0,this.showForm=!0},hapus(l){W.alert("Data yang dihapus tidak bisa dikembalikan!","Peringatan",{showCancelButton:!0,confirmButtonText:"Ya!",cancelButtonText:"Tidak!",type:"warning"}).then(()=>{this.$inertia.delete(this.route("admin.kelompok.delete",{id:l}),{preserveScroll:!0,onSuccess:()=>{this.fetchData(),x({type:"success",message:"Data Berhasil Dihapus!"})}})})}}},ue={class:"content"},ce={class:"content-heading d-flex justify-content-between align-items-center"},pe=s("span",null,"Kelompok",-1),he={class:"space-x-1"},fe={class:"block block-rounded"},_e={class:"block-content py-3"},ge=s("span",null,[s("i",{class:"fa fa-search"})],-1),be={class:"block-content p-0"},we=s("i",{class:"fa fa-angle-down ms-1"},null,-1),ke=s("i",{class:"si fa-fw si-note"},null,-1),ye=s("i",{class:"si fa-fw si-trash"},null,-1),ve={class:"block-content py-2"},Ce={class:"my-auto fs-sm"},De={class:"dialog-footer"},Ee=s("i",{class:"fa fa-close me-2"},null,-1),Ve=s("i",{class:"fa fa-check me-2"},null,-1);function xe(l,a,i,L,t,r){const u=O,d=T,m=F,g=X,k=$,y=Z,c=ee,v=q,B=H,K=R,M=te,U=oe,b=ae,j=D("select-guru"),G=le,z=se,A=D("base-layout"),C=ne;return h(),f(A,null,{default:o(()=>[s("div",ue,[s("div",ce,[pe,s("div",he,[e(u,{onClick:a[0]||(a[0]=n=>t.showForm=!0),type:"primary"},{default:o(()=>[p(" Tambah ")]),_:1})])]),s("div",fe,[s("div",_e,[e(y,{justify:"space-between"},{default:o(()=>[e(g,{span:12},{default:o(()=>[e(m,{modelValue:t.limit,"onUpdate:modelValue":a[1]||(a[1]=n=>t.limit=n),placeholder:"Pilih",style:{width:"115px"},onChange:a[2]||(a[2]=n=>r.fetchData(1))},{default:o(()=>[e(d,{label:"25",value:"25"}),e(d,{label:"50",value:"50"}),e(d,{label:"100",value:"100"})]),_:1},8,["modelValue"])]),_:1}),e(g,{span:8},{default:o(()=>[e(k,{modelValue:t.searchKeyword,"onUpdate:modelValue":a[3]||(a[3]=n=>t.searchKeyword=n),onInput:r.doSearch,clearable:""},{prefix:o(()=>[ge]),_:1},8,["modelValue","onInput"])]),_:1})]),_:1})]),s("div",be,[E((h(),f(M,{data:t.data,class:"table-click",style:{width:"100%"},onSortChange:r.sortChange},{default:o(()=>[e(c,{type:"index",width:"50"}),e(c,{prop:"nama",label:"Nama",sortable:""}),e(c,{prop:"admin.nama",label:"Guru",sortable:""}),e(c,{prop:"usia",label:"Usia",sortable:""}),e(c,{prop:"anak_count",label:"Jumlah Anak",sortable:""}),e(c,{label:"Aksi",align:"center",width:"180"},{default:o(n=>[e(K,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:o(()=>[e(B,null,{default:o(()=>[e(v,{class:"d-flex align-items-center justify-content-between space-x-1",onClick:V(I=>r.edit(n.row),["prevent"])},{default:o(()=>[p(" Ubah "),ke]),_:2},1032,["onClick"]),e(v,{class:"d-flex align-items-center justify-content-between space-x-1",onClick:V(I=>r.hapus(n.row.id),["prevent"])},{default:o(()=>[p(" Hapus "),ye]),_:2},1032,["onClick"])]),_:2},1024)]),default:o(()=>[e(u,{type:"primary"},{default:o(()=>[p(" Aksi "),we]),_:1})]),_:2},1024)]),_:1})]),_:1},8,["data","onSortChange"])),[[C,t.isLoading]])]),s("div",ve,[e(y,{justify:"space-between"},{default:o(()=>[e(g,{lg:12,class:"d-flex"},{default:o(()=>[s("p",Ce,"Menampilkan "+w(t.from)+" sampai "+w(t.to)+" dari "+w(t.total),1)]),_:1}),e(g,{lg:12,class:"text-end"},{default:o(()=>[e(U,{class:"float-end",background:"",layout:"prev, pager, next","page-size":t.pageSize,total:t.total,"current-page":t.page,onCurrentChange:r.fetchData},null,8,["page-size","total","current-page","onCurrentChange"])]),_:1})]),_:1})])])]),E((h(),f(z,{modelValue:t.showForm,"onUpdate:modelValue":a[7]||(a[7]=n=>t.showForm=n),title:t.formTitle,width:"30%","before-close":r.onCloseForm},{footer:o(()=>[s("span",De,[e(u,{onClick:r.onCloseForm},{default:o(()=>[Ee,p(" Batal ")]),_:1},8,["onClick"]),e(u,{type:"primary",onClick:r.submit},{default:o(()=>[Ve,p(" Simpan ")]),_:1},8,["onClick"])])]),default:o(()=>[e(G,{model:t.form,"label-position":"top"},{default:o(()=>[e(b,{label:"Nama Kelompok",error:i.errors.nama},{default:o(()=>[e(k,{modelValue:t.form.nama,"onUpdate:modelValue":a[4]||(a[4]=n=>t.form.nama=n),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["error"]),e(b,{label:"Guru",error:i.errors.admin_id},{default:o(()=>[e(j,{modelValue:t.form.admin_id,"onUpdate:modelValue":a[5]||(a[5]=n=>t.form.admin_id=n)},null,8,["modelValue"])]),_:1},8,["error"]),e(b,{label:"Usia",error:i.errors.usia},{default:o(()=>[e(m,{modelValue:t.form.usia,"onUpdate:modelValue":a[6]||(a[6]=n=>t.form.usia=n),placeholder:"Pilih",class:"w-100"},{default:o(()=>[e(d,{label:"3 Bulan - 2,5 Tahun",value:"3 Bulan - 2,5 Tahun"}),e(d,{label:"2,5 Tahun - 6 Tahun",value:"3 Tahun- 6 Tahun"})]),_:1},8,["modelValue"])]),_:1},8,["error"])]),_:1},8,["model"])]),_:1},8,["modelValue","title","before-close"])),[[C,t.loadingForm]])]),_:1})}const Xe=S(de,[["render",xe]]);export{Xe as default};
