import{S as C}from"./SelectKelompok-15197cc3.js";import{S as D}from"./SelectJenisKegiatan-4b46051f.js";import{S as L}from"./SelectKegiatan-497a7a59.js";import{_ as T,m as d,o as c,e as K,w as a,f as s,p as e,t as h,a6 as Y,j as P,L as k,g as U,a0 as N}from"./id-97c9e5f5.js";import{E as F}from"./index-add84256.js";import{E as O,a as A}from"./index-4f1c3644.js";import{E as H,a as J}from"./index-1567bcf2.js";import{E as I,a as R}from"./index-ec964314.js";import{E as q,a as z}from"./index-bcb34dd7.js";import{v as G}from"./directive-7739a56c.js";import"./panel-time-pick-fb908530.js";import"./index-ae963a16.js";import"./typescript-defaf979.js";import"./event-9519ab40.js";import"./utils-d081b9ca.js";import"./index-91a35dc4.js";import"./_initCloneObject-9298e566.js";import"./localeData-5bb316e4.js";import"./_baseIteratee-2fd9a4cf.js";import"./isArrayLikeObject-55c2e828.js";import"./raf-85a89f42.js";import"./index-4a89f490.js";import"./scroll-1fa1a40e.js";const Q={components:{SelectKelompok:C,SelectJenisKegiatan:D,SelectKegiatan:L},props:{value:{type:Object},editMode:{type:Boolean,default:!1},errors:{type:Object}},data(){return{title:"Tambah Penilaian Baru",disableKota:!1,form:{tgl:null,kelompok_id:null,jenis_id:null,kegiatan_id:null},lines:[],loading:!1}},created(){this.editMode&&this.setValue()},methods:{setValue(){this.form.nik=this.value.nik,this.form.nama=this.value.nama,this.form.jk=this.value.jk=="P"?"Perempuan":"Laki-Laki",this.form.tmpLahir=this.value.tmp_lahir,this.form.tglLahir=this.value.tgl_lahir,this.form.alamat=this.value.alamat,this.form.rt=this.value.rt,this.form.rw=this.value.rw,this.form.tps=this.value.tps,this.form.kota_id=this.value.kota_id,this.form.kecamatan_id=this.value.kecamatan_id,this.form.kelurahan_id=this.value.kelurahan_id,this.form.phone=this.value.phone,this.form.email=this.value.email,this.form.ktp=this.value.ktp,this.form.image=this.value.image,this.form.tps=this.value.tps,this.form.user_id=this.value.user_id},async fetchAnak(){try{this.isLoading=!0,this.lines=[];const l=await axios.get(this.route("admin.anak.data"),{params:{kelompok_id:this.form.kelompok_id}});l.status==200&&l.data.forEach((t,n)=>{this.lines.push({id:null,anak_id:t.id,user_id:t.user_id,anak_nama:t.nama,nilai:null})}),this.isLoading=!1}catch(l){console.error(l)}},submit(){this.loading=!0;let l=Object.assign(this.form,{lines:this.lines}),t=this.$inertia.form(l),n=this.editMode===!0?this.route("admin.nilai.update",{id:this.value.id}):this.route("admin.nilai.store");t.post(n,{preserveScroll:!0,onFinish:()=>{this.loading=!1},onSuccess:()=>this.$swal.fire({icon:"success",title:"Berhasil",text:"Pendukung Baru Berhasil Ditambahkan!",showCancelButton:!0,confirmButtonText:"Tambah Lainnya",cancelButtonText:"Kembali"}).then(_=>{_.isConfirmed&&this.$inertia.visit(this.route("user.pendukung.create"))})})}}},W={class:"content"},X={class:"content-heading d-flex justify-content-between align-items-center"},Z={class:"block rounded"},$={class:"block-content p-4"},ee=s("i",{class:"fa fa-check me-2"},null,-1);function te(l,t,n,_,o,f){const g=F,r=O,m=H,b=d("select-kelompok"),v=d("select-jenis-kegiatan"),B=d("select-kegiatan"),V=J,p=I,u=q,w=z,j=R,E=N,S=A,y=d("base-layout"),M=G;return c(),K(y,null,{default:a(()=>[s("div",W,[e(S,{"label-position":"top","label-width":"100%",onSubmit:U(f.submit,["prevent"])},{default:a(()=>[s("div",X,[s("span",null,h(o.title),1)]),s("div",Z,[Y((c(),P("div",$,[e(V,{gutter:40},{default:a(()=>[e(m,{md:12},{default:a(()=>[e(r,{label:"Tanggal",error:n.errors.tgl},{default:a(()=>[e(g,{modelValue:o.form.tgl,"onUpdate:modelValue":t[0]||(t[0]=i=>o.form.tgl=i),type:"date",placeholder:"Tanggal",format:"DD MMMM YYYY","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["error"])]),_:1}),e(m,{md:12},{default:a(()=>[e(r,{label:"Kelompok",error:n.errors.kelompok_id},{default:a(()=>[e(b,{modelValue:o.form.kelompok_id,"onUpdate:modelValue":t[1]||(t[1]=i=>o.form.kelompok_id=i),onChange:f.fetchAnak},null,8,["modelValue","onChange"])]),_:1},8,["error"])]),_:1}),e(m,{md:12},{default:a(()=>[e(r,{label:"Jenis Kegiatan",error:n.errors.jenis_id,onChange:t[3]||(t[3]=i=>o.form.kegiatan_id=null)},{default:a(()=>[e(v,{modelValue:o.form.jenis_id,"onUpdate:modelValue":t[2]||(t[2]=i=>o.form.jenis_id=i)},null,8,["modelValue"])]),_:1},8,["error"])]),_:1}),e(m,{md:12},{default:a(()=>[e(r,{label:"Kegiatan",error:n.errors.kegiatan_id},{default:a(()=>[e(B,{modelValue:o.form.kegiatan_id,"onUpdate:modelValue":t[4]||(t[4]=i=>o.form.kegiatan_id=i),disabled:!o.form.jenis_id,hasParent:"",jenis:o.form.jenis_id},null,8,["modelValue","disabled","jenis"])]),_:1},8,["error"])]),_:1})]),_:1}),e(j,{data:o.lines,border:"",class:"mb-4",id:"variant"},{default:a(()=>[e(p,{label:"Nama Anak"},{default:a(i=>[k(h(i.row.anak_nama),1)]),_:1}),e(p,{label:"Nilai"},{default:a(i=>[e(w,{modelValue:i.row.nilai,"onUpdate:modelValue":x=>i.row.nilai=x,placeholder:"Pilih",class:"w-100"},{default:a(()=>[e(u,{label:"Belum Berkembang",value:"BB"}),e(u,{label:"Mulai Berkembang",value:"MB"}),e(u,{label:"Berkembang Sesuai Harapan",value:"BSH"}),e(u,{label:"Berkembang Sangat Baik",value:"BSB"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"]),e(E,{"native-type":"submit",type:"primary",loading:o.loading},{default:a(()=>[ee,k(" Simpan ")]),_:1},8,["loading"])])),[[M,o.loading]])])]),_:1},8,["onSubmit"])])]),_:1})}const Ee=T(Q,[["render",te]]);export{Ee as default};
