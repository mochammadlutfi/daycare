import{S as P}from"./SelectJenisKegiatan-4b46051f.js";import{S as N}from"./SelectKegiatan-497a7a59.js";import{_ as O,m as b,o as d,e as w,w as l,f as s,t as E,p as e,L as u,a6 as D,j as h,F as V,U as C,a0 as R,g as F,q as I,u as q,v as z}from"./id-97c9e5f5.js";import{E as x}from"./index-1919b3f8.js";import{E as G}from"./index-d0506f46.js";import{E as Q,a as W}from"./index-4f1c3644.js";import{a as X,E as Z}from"./index-bcb34dd7.js";import{E as $}from"./index-ae1667d5.js";import{E as ee}from"./index-56cc5e45.js";import{v as oe}from"./directive-7739a56c.js";import{E as te,a as ae}from"./index-ec964314.js";import"./typescript-defaf979.js";import"./index-ae963a16.js";import"./event-9519ab40.js";import"./index-01cbe581.js";import"./scroll-1fa1a40e.js";import"./vnode-4e97093f.js";import"./_initCloneObject-9298e566.js";import"./index-4a89f490.js";import"./index-91a35dc4.js";import"./_baseIteratee-2fd9a4cf.js";import"./panel-time-pick-fb908530.js";import"./utils-d081b9ca.js";import"./isArrayLikeObject-55c2e828.js";import"./raf-85a89f42.js";const le={components:{SelectJenisKegiatan:P,SelectKegiatan:N},props:{hari:{type:Array},kelompok:{type:Object},errors:{type:Object}},computed:{},data(){return{isLoading:!1,formTitle:"Tambah Jadwal",showForm:!1,loadingForm:!1,editMode:!1,form:{id:null,kelompok_id:this.kelompok.id,hari:null,jenis_id:null,kegiatan_id:null,jam_mulai:null},data:[]}},async mounted(){await this.fetchData()},methods:{makeRange(t,o){var r=[];for(let f=t;f<=o;f++)r.push(f);return r},disabledJamMulai(){return this.makeRange(0,6).concat(this.makeRange(17,23))},sortChange(t){this.sort=t.prop,this.sortDir=t.order=="ascending"?"ASC":"DESC",this.fetchData()},doSearch:_.debounce(function(){this.isLoading=!0,this.fetchData()},1e3),async fetchData(t){try{this.isLoading=!0;const o=await axios.get(this.route("admin.kelompok.jadwal.data",{kelompok:this.kelompok.id}),{params:{}});o.status==200&&(this.data=o.data),this.isLoading=!1}catch(o){console.error(o)}},format_date(t){if(t)return moment(String(t)).format("DD MMMM YYYY")},onCloseForm(){this.title="Tambah Jadwal",this.editMode=!1,this.form.id=null,this.form.kelompok_id=null,this.form.jenis_id=null,this.form.kegiatan_id=null,this.form.hari=null,this.form.jam_mulai=null,this.form.jam_selesai=null,this.showForm=!1},submit(){this.loadingForm=!0;let t=this.$inertia.form(this.form),o=this.editMode==!0?this.route("admin.kelompok.jadwal.update",{kelompok:this.kelompok.id,id:this.form.id}):this.route("admin.kelompok.jadwal.store",{kelompok:this.kelompok.id});t.post(o,{preserveScroll:!0,onFinish:()=>{this.loadingForm=!1,this.fetchData()},onSuccess:()=>{x({type:"success",message:"Data Berhasil Disimpan!"}),this.onCloseForm()}})},edit(t){this.formTitle="Ubah Jadwal",this.form.id=t.id,this.form.kelompok_id=t.kelompok_id,this.form.jenis_id=t.jenis_id,this.form.kegiatan_id=t.kegiatan_id,this.form.hari=t.hari,this.form.jam_mulai=t.jam_mulai,this.form.jam_selesai=t.jam_selesai,this.editMode=!0,this.showForm=!0},hapus(t,o){G.alert("Data yang dihapus tidak bisa dikembalikan!","Peringatan",{showCancelButton:!0,confirmButtonText:"Ya!",cancelButtonText:"Tidak!",type:"warning"}).then(()=>{this.$inertia.delete(this.route("admin.kelompok.jadwal.delete",{kelompok:o,id:t}),{preserveScroll:!0,onSuccess:()=>{this.fetchData(),x({type:"success",message:"Data Berhasil Dihapus!"})}})})}}},ie={class:"content"},se={class:"content-heading d-flex justify-content-between align-items-center"},re={class:"space-x-1"},ne=s("i",{class:"fa fa-plus me-1"},null,-1),me={class:"block block-rounded"},de={class:"fs-4 fw-bold"},ue=s("i",{class:"fa fa-angle-down ms-1"},null,-1),ce=s("i",{class:"si fa-fw si-note"},null,-1),_e=s("i",{class:"si fa-fw si-trash"},null,-1),fe={class:"text-end"},pe=s("i",{class:"fa fa-close me-2"},null,-1),he=s("i",{class:"fa fa-check me-2"},null,-1);function ke(t,o,r,f,a,n){const p=R,m=te,j=I,M=q,S=z,J=ae,T=b("select-jenis-kegiatan"),c=Q,B=b("select-kegiatan"),H=Z,U=X,y=$,L=W,K=ee,Y=b("base-layout"),v=oe;return d(),w(Y,null,{default:l(()=>[s("div",ie,[s("div",se,[s("span",null,"Jadwal Kelompok "+E(r.kelompok.nama),1),s("div",re,[e(p,{onClick:o[0]||(o[0]=i=>a.showForm=!0),type:"primary"},{default:l(()=>[ne,u(" Tambah ")]),_:1})])]),D((d(),h("div",me,[(d(!0),h(V,null,C(r.hari,(i,k)=>(d(),h("div",{class:"block-content",key:k},[s("div",de,E(i),1),e(J,{data:a.data[i],style:{width:"100%"},border:""},{default:l(()=>[e(m,{type:"index",width:"50"}),e(m,{prop:"jenis.nama",label:"Jenis Kegiatan",width:"160"}),e(m,{prop:"kegiatan.nama",label:"Kegiatan"}),e(m,{prop:"kegiatan.tipe",label:"Tipe"}),e(m,{prop:"jam_mulai",label:"Jam Mulai"}),e(m,{prop:"jam_selesai",label:"Jam Selesai"}),e(m,{label:"Aksi",align:"center",width:"180"},{default:l(g=>[e(S,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:l(()=>[e(M,null,{default:l(()=>[e(j,{class:"d-flex align-items-center justify-content-between space-x-1",onClick:F(A=>n.edit(g.row),["prevent"])},{default:l(()=>[u(" Ubah "),ce]),_:2},1032,["onClick"]),e(j,{class:"d-flex align-items-center justify-content-between space-x-1",onClick:F(A=>n.hapus(g.row.id,g.row.kelompok_id),["prevent"])},{default:l(()=>[u(" Hapus "),_e]),_:2},1032,["onClick"])]),_:2},1024)]),default:l(()=>[e(p,{type:"primary"},{default:l(()=>[u(" Aksi "),ue]),_:1})]),_:2},1024)]),_:1})]),_:2},1032,["data"])]))),128))])),[[v,a.isLoading]])]),D((d(),w(K,{modelValue:a.showForm,"onUpdate:modelValue":o[6]||(o[6]=i=>a.showForm=i),title:a.formTitle,width:"30%","before-close":n.onCloseForm},{default:l(()=>[e(L,{model:a.form,"label-position":"top"},{default:l(()=>[e(c,{label:"Jenis Kegiatan",error:r.errors.jenis_id},{default:l(()=>[e(T,{modelValue:a.form.jenis_id,"onUpdate:modelValue":o[1]||(o[1]=i=>a.form.jenis_id=i)},null,8,["modelValue"])]),_:1},8,["error"]),e(c,{label:"Kegiatan",error:r.errors.kegiatan_id},{default:l(()=>[e(B,{modelValue:a.form.kegiatan_id,"onUpdate:modelValue":o[2]||(o[2]=i=>a.form.kegiatan_id=i),disabled:!a.form.jenis_id,hasParent:"",jenis:a.form.jenis_id},null,8,["modelValue","disabled","jenis"])]),_:1},8,["error"]),e(c,{label:"Hari",error:r.errors.usia},{default:l(()=>[e(U,{modelValue:a.form.hari,"onUpdate:modelValue":o[3]||(o[3]=i=>a.form.hari=i),placeholder:"Pilih",class:"w-100"},{default:l(()=>[(d(!0),h(V,null,C(r.hari,(i,k)=>(d(),w(H,{key:k,label:i,value:i},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["error"]),e(c,{label:"Jam",error:r.errors.jam_mulai},{default:l(()=>[e(y,{class:"w-100",format:"HH:mm","value-format":"HH:mm:ss",modelValue:a.form.jam_mulai,"onUpdate:modelValue":o[4]||(o[4]=i=>a.form.jam_mulai=i),"disabled-hours":n.disabledJamMulai},null,8,["modelValue","disabled-hours"])]),_:1},8,["error"]),e(c,{label:"Jam",error:r.errors.jam_selesai},{default:l(()=>[e(y,{class:"w-100",format:"HH:mm","value-format":"HH:mm:ss",modelValue:a.form.jam_selesai,"onUpdate:modelValue":o[5]||(o[5]=i=>a.form.jam_selesai=i),"disabled-hours":n.disabledJamMulai},null,8,["modelValue","disabled-hours"])]),_:1},8,["error"]),s("div",fe,[e(p,{onClick:n.onCloseForm},{default:l(()=>[pe,u(" Batal ")]),_:1},8,["onClick"]),e(p,{type:"primary",onClick:n.submit},{default:l(()=>[he,u(" Simpan ")]),_:1},8,["onClick"])])]),_:1},8,["model"])]),_:1},8,["modelValue","title","before-close"])),[[v,a.loadingForm]])]),_:1})}const Oe=O(le,[["render",ke]]);export{Oe as default};
