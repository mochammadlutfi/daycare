import{S as P}from"./SelectJenisKegiatan-9dc46ddf.js";import{S as N}from"./SelectKegiatan-d4cb49dc.js";import{_ as O,m as k,o as d,e as b,w as i,f as s,t as E,p as e,L as u,a6 as D,j as h,F as V,U as C,a0 as R,g as F,q as I,u as q,v as z}from"./id-3481afe5.js";import{E as x}from"./index-6f4b141f.js";import{E as G}from"./index-b64fb6eb.js";import{E as Q,a as W}from"./index-361ca79f.js";import{a as X,E as Z}from"./index-39beff3f.js";import{E as $}from"./index-4dcbf873.js";import{E as ee}from"./index-7afa1b35.js";import{v as ae}from"./directive-3586f8b3.js";import{E as te,a as oe}from"./index-7888d8ea.js";import"./typescript-defaf979.js";import"./index-b6dcfd92.js";import"./event-9519ab40.js";import"./index-0767bb4b.js";import"./scroll-bcd136fa.js";import"./vnode-c8d30334.js";import"./_initCloneObject-eb6e072f.js";import"./index-facbdfef.js";import"./index-a3279758.js";import"./_baseIteratee-e7ebdd39.js";import"./panel-time-pick-db034851.js";import"./utils-b76a7458.js";import"./isArrayLikeObject-ad341f20.js";import"./raf-3d0315fc.js";const ie={components:{SelectJenisKegiatan:P,SelectKegiatan:N},props:{hari:{type:Array},jadwal:{type:Object},errors:{type:Object}},computed:{},data(){return{isLoading:!1,formTitle:"Tambah Jadwal",showForm:!1,loadingForm:!1,editMode:!1,form:{id:null,jadwal_id:this.jadwal.id,hari:null,jenis_id:null,kegiatan_id:null,jam_mulai:null},data:[]}},async mounted(){await this.fetchData()},methods:{makeRange(t,a){var r=[];for(let f=t;f<=a;f++)r.push(f);return r},disabledJamMulai(){return this.makeRange(0,6).concat(this.makeRange(17,23))},sortChange(t){this.sort=t.prop,this.sortDir=t.order=="ascending"?"ASC":"DESC",this.fetchData()},doSearch:_.debounce(function(){this.isLoading=!0,this.fetchData()},1e3),async fetchData(t){try{this.isLoading=!0;const a=await axios.get(this.route("admin.jadwal.detail.data",{id:this.jadwal.id}),{params:{}});a.status==200&&(this.data=a.data),this.isLoading=!1}catch(a){console.error(a)}},format_date(t){if(t)return moment(String(t)).format("DD MMMM YYYY")},onCloseForm(){this.title="Tambah Jadwal",this.editMode=!1,this.form.id=null,this.form.kelompok_id=null,this.form.jenis_id=null,this.form.kegiatan_id=null,this.form.hari=null,this.form.jam_mulai=null,this.form.jam_selesai=null,this.showForm=!1},submit(){this.loadingForm=!0;let t=this.$inertia.form(this.form),a=this.editMode==!0?this.route("admin.jadwal.detail.update",{id:this.jadwal.id,detail:this.form.id}):this.route("admin.jadwal.detail.store",{id:this.jadwal.id});t.post(a,{preserveScroll:!0,onFinish:()=>{this.loadingForm=!1,this.fetchData()},onSuccess:()=>{x({type:"success",message:"Data Berhasil Disimpan!"}),this.onCloseForm()}})},edit(t){this.formTitle="Ubah Jadwal",this.form.id=t.id,this.form.kelompok_id=t.kelompok_id,this.form.jenis_id=t.jenis_id,this.form.kegiatan_id=t.kegiatan_id,this.form.hari=t.hari,this.form.jam_mulai=t.jam_mulai,this.form.jam_selesai=t.jam_selesai,this.editMode=!0,this.showForm=!0},hapus(t){G.alert("Data yang dihapus tidak bisa dikembalikan!","Peringatan",{showCancelButton:!0,confirmButtonText:"Ya!",cancelButtonText:"Tidak!",type:"warning"}).then(()=>{this.$inertia.delete(this.route("admin.jadwal.detail.delete",{id:this.jadwal.id,detail:t}),{preserveScroll:!0,onSuccess:()=>{this.fetchData(),x({type:"success",message:"Data Berhasil Dihapus!"})}})})}}},le={class:"content"},se={class:"content-heading d-flex justify-content-between align-items-center"},re={class:"space-x-1"},ne=s("i",{class:"fa fa-plus me-1"},null,-1),me={class:"block block-rounded"},de={class:"fs-4 fw-bold"},ue=s("i",{class:"fa fa-angle-down ms-1"},null,-1),ce=s("i",{class:"si fa-fw si-note"},null,-1),_e=s("i",{class:"si fa-fw si-trash"},null,-1),fe={class:"text-end"},pe=s("i",{class:"fa fa-close me-2"},null,-1),he=s("i",{class:"fa fa-check me-2"},null,-1);function ge(t,a,r,f,o,n){const p=R,m=te,j=I,M=q,S=z,J=oe,T=k("select-jenis-kegiatan"),c=Q,B=k("select-kegiatan"),H=Z,U=X,y=$,L=W,K=ee,Y=k("base-layout"),v=ae;return d(),b(Y,null,{default:i(()=>[s("div",le,[s("div",se,[s("span",null,"Jadwal Kelompok "+E(r.jadwal.kelompok.nama),1),s("div",re,[e(p,{onClick:a[0]||(a[0]=l=>o.showForm=!0),type:"primary"},{default:i(()=>[ne,u(" Tambah ")]),_:1})])]),D((d(),h("div",me,[(d(!0),h(V,null,C(r.hari,(l,g)=>(d(),h("div",{class:"block-content",key:g},[s("div",de,E(l),1),e(J,{data:o.data[l],style:{width:"100%"},border:""},{default:i(()=>[e(m,{type:"index",width:"50"}),e(m,{prop:"jenis.nama",label:"Jenis Kegiatan",width:"160"}),e(m,{prop:"kegiatan.nama",label:"Kegiatan"}),e(m,{prop:"kegiatan.tipe",label:"Tipe"}),e(m,{prop:"jam_mulai",label:"Jam Mulai"}),e(m,{prop:"jam_selesai",label:"Jam Selesai"}),e(m,{label:"Aksi",align:"center",width:"180"},{default:i(w=>[e(S,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:i(()=>[e(M,null,{default:i(()=>[e(j,{class:"d-flex align-items-center justify-content-between space-x-1",onClick:F(A=>n.edit(w.row),["prevent"])},{default:i(()=>[u(" Ubah "),ce]),_:2},1032,["onClick"]),e(j,{class:"d-flex align-items-center justify-content-between space-x-1",onClick:F(A=>n.hapus(w.row.id,w.row.kelompok_id),["prevent"])},{default:i(()=>[u(" Hapus "),_e]),_:2},1032,["onClick"])]),_:2},1024)]),default:i(()=>[e(p,{type:"primary"},{default:i(()=>[u(" Aksi "),ue]),_:1})]),_:2},1024)]),_:1})]),_:2},1032,["data"])]))),128))])),[[v,o.isLoading]])]),D((d(),b(K,{modelValue:o.showForm,"onUpdate:modelValue":a[6]||(a[6]=l=>o.showForm=l),title:o.formTitle,width:"30%","before-close":n.onCloseForm},{default:i(()=>[e(L,{model:o.form,"label-position":"top"},{default:i(()=>[e(c,{label:"Jenis Kegiatan",error:r.errors.jenis_id},{default:i(()=>[e(T,{modelValue:o.form.jenis_id,"onUpdate:modelValue":a[1]||(a[1]=l=>o.form.jenis_id=l)},null,8,["modelValue"])]),_:1},8,["error"]),e(c,{label:"Kegiatan",error:r.errors.kegiatan_id},{default:i(()=>[e(B,{modelValue:o.form.kegiatan_id,"onUpdate:modelValue":a[2]||(a[2]=l=>o.form.kegiatan_id=l),disabled:!o.form.jenis_id,hasParent:"",jenis:o.form.jenis_id},null,8,["modelValue","disabled","jenis"])]),_:1},8,["error"]),e(c,{label:"Hari",error:r.errors.usia},{default:i(()=>[e(U,{modelValue:o.form.hari,"onUpdate:modelValue":a[3]||(a[3]=l=>o.form.hari=l),placeholder:"Pilih",class:"w-100"},{default:i(()=>[(d(!0),h(V,null,C(r.hari,(l,g)=>(d(),b(H,{key:g,label:l,value:l},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["error"]),e(c,{label:"Jam",error:r.errors.jam_mulai},{default:i(()=>[e(y,{class:"w-100",format:"HH:mm","value-format":"HH:mm:ss",modelValue:o.form.jam_mulai,"onUpdate:modelValue":a[4]||(a[4]=l=>o.form.jam_mulai=l),"disabled-hours":n.disabledJamMulai},null,8,["modelValue","disabled-hours"])]),_:1},8,["error"]),e(c,{label:"Jam",error:r.errors.jam_selesai},{default:i(()=>[e(y,{class:"w-100",format:"HH:mm","value-format":"HH:mm:ss",modelValue:o.form.jam_selesai,"onUpdate:modelValue":a[5]||(a[5]=l=>o.form.jam_selesai=l),"disabled-hours":n.disabledJamMulai},null,8,["modelValue","disabled-hours"])]),_:1},8,["error"]),s("div",fe,[e(p,{onClick:n.onCloseForm},{default:i(()=>[pe,u(" Batal ")]),_:1},8,["onClick"]),e(p,{type:"primary",onClick:n.submit},{default:i(()=>[he,u(" Simpan ")]),_:1},8,["onClick"])])]),_:1},8,["model"])]),_:1},8,["modelValue","title","before-close"])),[[v,o.loadingForm]])]),_:1})}const Oe=O(ie,[["render",ge]]);export{Oe as default};
